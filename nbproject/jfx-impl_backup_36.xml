<?xml version="1.0" encoding="UTF-8"?>
<!--
*** GENERATED FROM TEMPLATE - DO NOT EDIT ***
***       EDIT ../build.xml INSTEAD       ***
-->

<project name="jfx-impl" default="jfx-deployment" basedir=".." xmlns:j2seproject1="http://www.netbeans.org/ns/j2se-project/1" 
         xmlns:j2seproject3="http://www.netbeans.org/ns/j2se-project/3" xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <description>JavaFX-specific Ant calls</description>


    <!-- Empty placeholders for easier customization in ../build.xml -->
    
    <target name="-pre-jfx-jar">
        <!-- Called right before <fx:jar> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-jar">
        <!-- Called right after <fx:jar> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-pre-jfx-deploy">
        <!-- Called right before <fx:deploy> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-deploy">
        <!-- Called right after <fx:deploy> task. You can override this target in the ../build.xml file. -->
    </target>
    
    <target name="-pre-jfx-native">
        <!-- Called right before the call to native packager (just after -pre-jfx-deploy). You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-native">
        <!-- Called right after the call to native packager (just after -post-jfx-deploy). You can override this target in the ../build.xml file. -->
    </target>
    
    
    <!-- Check system and JDK version -->

    <target name="-check-operating-system">
        <condition property="running.on.mac">
            <os family="mac"/>
        </condition>
        <condition property="running.on.unix">
            <os family="unix"/>
        </condition>
        <condition property="running.on.windows">
            <os family="windows"/>
        </condition>
        <echo message="running.on.mac = ${running.on.mac}" level="verbose"/>
        <echo message="running.on.unix = ${running.on.unix}" level="verbose"/>
        <echo message="running.on.windows = ${running.on.windows}" level="verbose"/>
    </target>

    <target name="-check-platform-home-fxsdk-java" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.platform.home.fxsdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}java"/>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-fxsdk-java" depends="-check-platform-home-fxsdk-java" if="do.set.platform.home.fxsdk.java">
        <property name="active.platform.home.java.executable" value="${javafx.sdk}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-java" if="platform.home">
        <condition property="do.set.platform.home.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}bin${file.separator}java"/>
                    <available file="${platform.home}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-java" depends="-set-platform-home-fxsdk-java,-check-platform-home-java" if="do.set.platform.home.java">
        <property name="active.platform.home.java.executable" value="${platform.home}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-probjdk-java" unless="active.platform.home.java.executable">
        <condition property="do.set.platform.home.probjdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}java"/>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-probjdk-java" depends="-set-platform-home-java,-check-platform-home-probjdk-java" if="do.set.platform.home.probjdk.java">
        <property name="active.platform.home.java.executable" value="${java.home}${file.separator}..${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-envjdk-java" unless="active.platform.home.java.executable">
        <property environment="env"/>
        <condition property="do.set.platform.home.envjdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}java"/>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-envjdk-java" depends="-set-platform-home-probjdk-java,-check-platform-home-envjdk-java" if="do.set.platform.home.envjdk.java">
        <property environment="env"/>
        <property name="active.platform.home.java.executable" value="${env.JAVA_HOME}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-fxrt-java" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.platform.home.fxrt.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}java"/>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-fxrt-java" depends="-set-platform-home-envjdk-java,-check-platform-home-fxrt-java" if="do.set.platform.home.fxrt.java">
        <property name="active.platform.home.java.executable" value="${javafx.runtime}${file.separator}bin${file.separator}java"/>
        <echo message="Warning: java executable not found in JDK, evaluating java executable in RT instead." level="info"/>
    </target>
    <target name="-check-platform-home-jre-java" unless="active.platform.home.java.executable">
        <condition property="do.set.platform.home.jre.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}bin${file.separator}java"/>
                    <available file="${java.home}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-jre-java" depends="-set-platform-home-fxrt-java,-check-platform-home-jre-java" if="do.set.platform.home.jre.java">
        <property name="active.platform.home.java.executable" value="${java.home}${file.separator}bin${file.separator}java"/>
        <echo message="Warning: java executable not found in JDK, evaluating java executable in RT instead." level="info"/>
    </target>
    <target name="-check-platform-home" depends="-set-platform-home-jre-java">
        <echo message="active.platform.home.java.executable = ${active.platform.home.java.executable}" level="verbose"/>
        <fail message="Error:${line.separator}java executable not found !" unless="active.platform.home.java.executable"/>
    </target>
        
    <target name="-check-jdk-version" depends="-do-init,-check-platform-home" unless="jdk-version-checked-in-jfximpl">
        <local name="version-output"/>
        <exec executable="${active.platform.home.java.executable}" outputproperty="version-output">
            <arg value="-version"/>
        </exec>
        <echo message="version-output:${line.separator}${version-output}" level="verbose"/>
        <condition property="have-jdk-older-than-1.6">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
                <contains string="${version-output}" substring="java version &quot;1.4"/>
                <contains string="${version-output}" substring="java version &quot;1.5"/>
            </or>
        </condition>
        <fail message="Error:${line.separator}JavaFX 2.0+ projects require JDK version 1.6+ !" if="have-jdk-older-than-1.6"/>
        <condition property="have-jdk-7u4or5-mac">
            <and>
                <or>
                    <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                    <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
                </or>
                <os family="mac"/>
            </and>
        </condition>
        <condition property="have-jdk-pre7u6">
            <or>
                <isset property="have-jdk-older-than-1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0&quot;"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_01"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_02"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_03"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
            </or>
        </condition>
        <condition property="have-jdk-pre7u14">
            <or>
                <isset property="have-jdk-pre7u6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_06"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_07"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_08"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_09"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_10"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_11"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_12"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_13"/>
            </or>
        </condition>
        <property name="jdk-version-checked-in-jfximpl" value="true"/>
        <echo message="have-jdk-7u4or5-mac = ${have-jdk-7u4or5-mac}" level="verbose"/>
        <echo message="have-jdk-pre7u6 = ${have-jdk-pre7u6}" level="verbose"/>
        <echo message="have-jdk-pre7u14 = ${have-jdk-pre7u14}" level="verbose"/>
    </target>
        
    <target name="-check-ant-jre-version" unless="ant-jre-version-checked-in-jfximpl">
        <local name="version-output"/>
        <exec executable="${java.home}${file.separator}bin${file.separator}java" outputproperty="version-output">
            <arg value="-version"/>
        </exec>
        <echo message="version-output:${line.separator}${version-output}" level="verbose"/>
        <condition property="have-ant-jre-pre7u6">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
                <contains string="${version-output}" substring="java version &quot;1.4"/>
                <contains string="${version-output}" substring="java version &quot;1.5"/>
                <contains string="${version-output}" substring="java version &quot;1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0&quot;"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_01"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_02"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_03"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
            </or>
        </condition>
        <condition property="have-jdk7-css2bin-bug">
            <!-- as of NB7.4 release date the external css-to-bss converter is unreliable in all JDK7 versions before 7u40 (with exception of 7u14)-->
            <and>
                <contains string="${version-output}" substring="java version &quot;1.7"/>
                <not><matches string="${version-output}" pattern="\bjava version &quot;1\.7\.0_(14|[4-9].)"/></not>
            </and>
        </condition>
        <property name="ant-jre-version-checked-in-jfximpl" value="true"/>
        <echo message="have-ant-jre-pre7u6 = ${have-ant-jre-pre7u6}" level="verbose"/>
        <echo message="have-jdk7-css2bin-bug = ${have-jdk7-css2bin-bug}" level="verbose"/>
    </target>

    <target name="-check-jdk-7u4or5-mac" depends="-check-jdk-version" if="have-jdk-7u4or5-mac">
        <fail message="Error:${line.separator}JDK 7u4 Mac and 7u5 Mac do not support WebStart and JavaFX 2.0+ browser plugin technologies.${line.separator}Please upgrade to JDK 7u6 or later."/>
    </target>

    
    <!-- Check availability of JavaFX SDK deployment support (ant-javafx.jar) -->

    <target name="-check-endorsed-javafx-ant-classpath">
        <condition property="endorsed-javafx-ant-classpath-available">
            <and>
                <isset property="endorsed.javafx.ant.classpath"/>
                <not>
                    <equals arg1="${endorsed.javafx.ant.classpath}" arg2=""/>
                </not>
            </and>
        </condition>
        <echo message="endorsed-javafx-ant-classpath-available = ${endorsed-javafx-ant-classpath-available}" level="verbose"/>
    </target>

    <target name="-check-property-javafx.sdk">
        <echo message="javafx.sdk = ${javafx.sdk}" level="verbose"/>
        <condition property="javafx.sdk.defined">
            <and>
                <isset property="javafx.sdk"/>
                <not><contains string="${javafx.sdk}" substring="$${platform" casesensitive="false"/></not>
            </and>
        </condition>
        <condition property="javafx.sdk.missing+default">
            <and>
                <equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/>
                <not><isset property="javafx.sdk.defined"/></not>
            </and>
        </condition>
        <condition property="javafx.sdk.missing-default">
            <and>
                <not><equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/></not>
                <not><isset property="javafx.sdk.defined"/></not>
            </and>
        </condition>
        <echo message="javafx.sdk.defined = ${javafx.sdk.defined}" level="verbose"/>
        <echo message="javafx.sdk.missing+default = ${javafx.sdk.missing+default}" level="verbose"/>
        <echo message="javafx.sdk.missing-default = ${javafx.sdk.missing-default}" level="verbose"/>
    </target>

    <target name="-check-ant-javafx-in-fxsdk-lib" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.ant-javafx.in.fxsdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-fxsdk-lib" depends="-check-ant-javafx-in-fxsdk-lib" if="do.set.ant-javafx.in.fxsdk.lib">
        <property name="ant-javafx.jar.location" value="${javafx.sdk}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-fxsdk-tools" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.ant-javafx.in.fxsdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-fxsdk-tools" depends="-set-ant-javafx-in-fxsdk-lib,-check-ant-javafx-in-fxsdk-tools" if="do.set.ant-javafx.in.fxsdk.tools">
        <property name="ant-javafx.jar.location" value="${javafx.sdk}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-platform-home-lib" if="platform.home">
        <condition property="do.set.ant-javafx.in.platform.home.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${platform.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-platform-home-lib" depends="-set-ant-javafx-in-fxsdk-tools,-check-ant-javafx-in-platform-home-lib" if="do.set.ant-javafx.in.platform.home.lib">
        <property name="ant-javafx.jar.location" value="${platform.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-platform-home-tools" if="platform.home">
        <condition property="do.set.ant-javafx.in.platform.home.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${platform.home}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-platform-home-tools" depends="-set-ant-javafx-in-platform-home-lib,-check-ant-javafx-in-platform-home-tools" if="do.set.ant-javafx.in.platform.home.tools">
        <property name="ant-javafx.jar.location" value="${platform.home}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-probjdk-lib" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.probjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}..${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-probjdk-lib" depends="-set-ant-javafx-in-platform-home-tools,-check-ant-javafx-in-probjdk-lib" if="do.set.ant-javafx.in.probjdk.lib">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}..${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-probjdk-tools" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.probjdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}..${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-probjdk-tools" depends="-set-ant-javafx-in-probjdk-lib,-check-ant-javafx-in-probjdk-tools" if="do.set.ant-javafx.in.probjdk.tools">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}..${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-macjdk-lib" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.macjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-macjdk-lib" depends="-set-ant-javafx-in-probjdk-tools,-check-ant-javafx-in-macjdk-lib" if="do.set.ant-javafx.in.macjdk.lib">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-envjdk-lib" unless="ant-javafx.jar.location">
        <property environment="env"/>
        <condition property="do.set.ant-javafx.in.envjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-envjdk-lib" depends="-set-ant-javafx-in-macjdk-lib,-check-ant-javafx-in-envjdk-lib" if="do.set.ant-javafx.in.envjdk.lib">
        <property name="ant-javafx.jar.location" value="${env.JAVA_HOME}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-envjdk-tools" unless="ant-javafx.jar.location">
        <property environment="env"/>
        <condition property="do.set.ant-javafx.in.envjdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-envjdk-tools" depends="-set-ant-javafx-in-envjdk-lib,-check-ant-javafx-in-envjdk-tools" if="do.set.ant-javafx.in.envjdk.tools">
        <property name="ant-javafx.jar.location" value="${env.JAVA_HOME}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-pre-check-ant-javafx-version" depends="-set-ant-javafx-in-envjdk-tools" unless="ant-javafx-version-already-checked-in-jfximpl">
        <condition property="do.check.ant-javafx.version">
            <and>
                <isset property="ant-javafx.jar.location"/>
                <not><isset property="ant-javafx-version-already-checked-in-jfximpl"/></not>
            </and>
        </condition>
    </target>
    <target name="-set-endorsed-javafx-ant-classpath" depends="-check-endorsed-javafx-ant-classpath,-pre-check-ant-javafx-version" if="endorsed-javafx-ant-classpath-available">
        <property name="javafx.ant.classpath" value="${endorsed.javafx.ant.classpath}:${ant-javafx.jar.location}"/>
    </target>
    <target name="-set-javafx-ant-classpath" depends="-check-endorsed-javafx-ant-classpath,-pre-check-ant-javafx-version" unless="endorsed-javafx-ant-classpath-available">
        <property name="javafx.ant.classpath" value="${ant-javafx.jar.location}"/>
    </target>
    <target name="-check-ant-javafx-version" depends="-pre-check-ant-javafx-version,
            -set-endorsed-javafx-ant-classpath,-set-javafx-ant-classpath" if="do.check.ant-javafx.version">
        <echo message="ant-javafx.jar.location = ${ant-javafx.jar.location}" level="verbose"/>
        <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
            uri="javafx:com.sun.javafx.tools.ant"
            classpath="${javafx.ant.classpath}"/>
        <condition property="have-fx-ant-init">
            <typefound name="javafx:com.sun.javafx.tools.ant:init-ant"/>
        </condition>
        <property name="ant-javafx-version-already-checked-in-jfximpl" value="true"/>
        <echo message="have-fx-ant-init = ${have-fx-ant-init}" level="verbose"/>
    </target>
    <target name="-check-jfx-sdk-version-old" depends="-check-ant-javafx-version" unless="have-fx-ant-init">
        <property name="javafx.ant.version" value="1.0"/>
    </target>
    <target name="-check-jfx-sdk-version-new" depends="-check-ant-javafx-version" if="have-fx-ant-init">
        <fx:init-ant/>
        <condition property="have-fx-ant-api-1.1">
            <!-- new features from JavaFX 2.0.2 are available in API version 1.1 or later -->
            <matches pattern="1.[1-9]" string="${javafx.ant.version}"/>
        </condition>
        <condition property="have-fx-ant-api-1.2">
            <!-- new features from JavaFX 2.2 are available in API version 1.2 or later -->
            <matches pattern="1.[2-9]" string="${javafx.ant.version}"/>
        </condition>
    </target>
    <target name="-check-jfx-sdk-version" depends="-check-jfx-sdk-version-old, -check-jfx-sdk-version-new" unless="jfx.sdk.version.checked">
        <echo message="Detected JavaFX Ant API version ${javafx.ant.version}" level="info"/>
        <echo message="have-fx-ant-api-1.1 = ${have-fx-ant-api-1.1}" level="verbose"/>
        <echo message="have-fx-ant-api-1.2 = ${have-fx-ant-api-1.2}" level="verbose"/>
        <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
        <property name="jfx.sdk.version.checked" value="true"/>
    </target>

    <target name="-check-jfx-deployment" depends="-check-jdk-version,-check-jfx-sdk-version">
        <condition property="jfx-deployment-available">
            <and>
                <or>
                    <isset property="do.set.ant-javafx.in.fxsdk.lib"/>
                    <isset property="do.set.ant-javafx.in.fxsdk.tools"/>
                    <isset property="do.set.ant-javafx.in.platform.home.lib"/>
                    <isset property="do.set.ant-javafx.in.platform.home.tools"/>
                    <isset property="do.set.ant-javafx.in.probjdk.lib"/>
                    <isset property="do.set.ant-javafx.in.probjdk.tools"/>
                    <isset property="do.set.ant-javafx.in.envjdk.lib"/>
                    <isset property="do.set.ant-javafx.in.envjdk.tools"/>
                </or>
                <isset property="ant-javafx.jar.location"/>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+jdk7u6">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <not><isset property="have-jdk-pre7u6"/></not>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+javafx.sdk.missing+default">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <isset property="have-jdk-pre7u6"/>
                <isset property="javafx.sdk.missing+default"/>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+javafx.sdk.missing-default">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <isset property="have-jdk-pre7u6"/>
                <isset property="javafx.sdk.missing-default"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}JavaFX deployment library not found in active JDK.${line.separator}Please check that the JDK is correctly installed and its version is at least 7u4 on Mac or 7u6 on other systems." if="jfx-deployment-missing+jdk7u6"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found.${line.separator}JavaFX SDK path undefined. Check the definition of ${platform.active} in Java Platform Manager${line.separator}(or directly the properties platform.active and javafx.sdk in project.properties file).${line.separator}Note: If missing, the default JavaFX-enabled platform gets created automatically when creating a new JavaFX Project." if="jfx-deployment-missing+javafx.sdk.missing+default"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found.${line.separator}JavaFX SDK path undefined. Check the definition of ${platform.active} in Java Platform Manager${line.separator}(or directly the properties platform.active and javafx.sdk in project.properties file)." if="jfx-deployment-missing+javafx.sdk.missing-default"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found." unless="jfx-deployment-available"/>
        <echo message="jfx-deployment-available = ${jfx-deployment-available}" level="verbose"/>
    </target>
    
    
    <!-- Check availability of main JavaFX runtime jar (jfxrt.jar) -->

    <target name="-check-property-javafx.runtime">
        <echo message="javafx.runtime = ${javafx.runtime}" level="verbose"/>
        <condition property="javafx.runtime.defined">
            <and>
                <isset property="javafx.runtime"/>
                <not><contains string="${javafx.runtime}" substring="$${platform" casesensitive="false"/></not>
            </and>
        </condition>
        <condition property="javafx.runtime.missing+default">
            <and>
                <equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/>
                <not><isset property="javafx.runtime.defined"/></not>
            </and>
        </condition>
        <condition property="javafx.runtime.missing-default">
            <and>
                <not><equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/></not>
                <not><isset property="javafx.runtime.defined"/></not>
            </and>
        </condition>
        <echo message="javafx.runtime.defined = ${javafx.runtime.defined}" level="verbose"/>
        <echo message="javafx.runtime.missing+default = ${javafx.runtime.missing+default}" level="verbose"/>
        <echo message="javafx.runtime.missing-default = ${javafx.runtime.missing-default}" level="verbose"/>
    </target>

    <target name="-check-jfxrt-in-fxrt" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.jfxrt.in.fxrt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.runtime}${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxrt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxrt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.runtime}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxrt-old" depends="-check-jfxrt-in-fxrt" if="do.set.jfxrt.in.fxrt.old">
        <property name="jfxrt.jar.location" value="${javafx.runtime}${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxrt-new" depends="-set-jfxrt-in-fxrt-old,-check-jfxrt-in-fxrt" if="do.set.jfxrt.in.fxrt.new">
        <property name="jfxrt.jar.location" value="${javafx.runtime}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-fxsdk-jre" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.jfxrt.in.fxsdk.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxsdk.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxsdk.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxsdk-jre-old" depends="-set-jfxrt-in-fxrt-new,-check-jfxrt-in-fxsdk-jre" if="do.set.jfxrt.in.fxsdk.jre.old">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxsdk-jre-new" depends="-set-jfxrt-in-fxsdk-jre-old,-check-jfxrt-in-fxsdk-jre" if="do.set.jfxrt.in.fxsdk.jre.new">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-fxsdk-rt" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.jfxrt.in.fxsdk.rt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxsdk.rt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxsdk.rt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxsdk-rt-old" depends="-set-jfxrt-in-fxsdk-jre-new,-check-jfxrt-in-fxsdk-rt" if="do.set.jfxrt.in.fxsdk.rt.old">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxsdk-rt-new" depends="-set-jfxrt-in-fxsdk-rt-old,-check-jfxrt-in-fxsdk-rt" if="do.set.jfxrt.in.fxsdk.rt.new">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-platform-home-jre" if="platform.home">
        <condition property="do.set.jfxrt.in.platform.home.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.platform.home.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.platform.home.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-platform-home-jre-old" depends="-set-jfxrt-in-fxsdk-rt-new,-check-jfxrt-in-platform-home-jre" if="do.set.jfxrt.in.platform.home.jre.old">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-platform-home-jre-new" depends="-set-jfxrt-in-platform-home-jre-old,-check-jfxrt-in-platform-home-jre" if="do.set.jfxrt.in.platform.home.jre.new">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-platform-home-rt" if="platform.home">
        <condition property="do.set.jfxrt.in.platform.home.rt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.platform.home.rt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.platform.home.rt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-platform-home-rt-old" depends="-set-jfxrt-in-platform-home-jre-new,-check-jfxrt-in-platform-home-rt" if="do.set.jfxrt.in.platform.home.rt.old">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-platform-home-rt-new" depends="-set-jfxrt-in-platform-home-rt-old,-check-jfxrt-in-platform-home-rt" if="do.set.jfxrt.in.platform.home.rt.new">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-jre" unless="jfxrt.jar.location">
        <condition property="do.set.jfxrt.in.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-jre-old" depends="-set-jfxrt-in-platform-home-rt-new,-check-jfxrt-in-jre" if="do.set.jfxrt.in.jre.old">
        <property name="jfxrt.jar.location" value="${java.home}${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-jre-new" depends="-set-jfxrt-in-jre-old,-check-jfxrt-in-jre" if="do.set.jfxrt.in.jre.new">
        <property name="jfxrt.jar.location" value="${java.home}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-envjdk-jre" unless="jfxrt.jar.location">
        <property environment="env"/>
        <condition property="do.set.jfxrt.in.envjdk.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.envjdk.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.envjdk.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-envjdk-jre-old" depends="-set-jfxrt-in-jre-new,-check-jfxrt-in-envjdk-jre" if="do.set.jfxrt.in.envjdk.jre.old">
        <property name="jfxrt.jar.location" value="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-envjdk-jre-new" depends="-set-jfxrt-in-envjdk-jre-old,-check-jfxrt-in-envjdk-jre" if="do.set.jfxrt.in.envjdk.jre.new">
        <property name="jfxrt.jar.location" value="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-pre-check-jfx-runtime" depends="-set-jfxrt-in-envjdk-jre-new">
        <echo message="jfxrt.jar.location = ${jfxrt.jar.location}" level="verbose"/>
    </target>

    <target name="-check-jfx-runtime" depends="-check-jdk-version, -pre-check-jfx-runtime">
        <condition property="jfx-runtime-available">
            <and>
                <or>
                    <isset property="do.set.jfxrt.in.fxrt.old"/>
                    <isset property="do.set.jfxrt.in.fxrt.new"/>
                    <isset property="do.set.jfxrt.in.fxsdk.jre.old"/>
                    <isset property="do.set.jfxrt.in.fxsdk.jre.new"/>
                    <isset property="do.set.jfxrt.in.fxsdk.rt.old"/>
                    <isset property="do.set.jfxrt.in.fxsdk.rt.new"/>
                    <isset property="do.set.jfxrt.in.platform.home.jre.old"/>
                    <isset property="do.set.jfxrt.in.platform.home.jre.new"/>
                    <isset property="do.set.jfxrt.in.platform.home.rt.old"/>
                    <isset property="do.set.jfxrt.in.platform.home.rt.new"/>
                    <isset property="do.set.jfxrt.in.jre.old"/>
                    <isset property="do.set.jfxrt.in.jre.new"/>
                    <isset property="do.set.jfxrt.in.envjdk.jre.old"/>
                    <isset property="do.set.jfxrt.in.envjdk.jre.new"/>
                </or>
                <isset property="jfxrt.jar.location"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}JavaFX runtime JAR not found." unless="jfx-runtime-available"/>
        <echo message="jfx-runtime-available = ${jfx-runtime-available}" level="verbose"/>
    </target>


    <!-- Check availability of WebStart executable -->

    <target name="-check-webstart-in-fxrt" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.webstart.in.fxrt">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.runtime.defined"/>
                <or>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxrt" depends="-check-webstart-in-fxrt" if="do.set.webstart.in.fxrt">
        <property name="active.webstart.executable" value="${javafx.runtime}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-fxsdk-jre" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.webstart.in.fxsdk.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.sdk.defined"/>
                <or>
                    <available file="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxsdk-jre" depends="-set-webstart-in-fxrt,-check-webstart-in-fxsdk-jre" if="do.set.webstart.in.fxsdk.jre">
        <property name="active.webstart.executable" value="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-fxsdk" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.webstart.in.fxsdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.sdk.defined"/>
                <or>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxsdk" depends="-set-webstart-in-fxsdk-jre,-check-webstart-in-fxsdk" if="do.set.webstart.in.fxsdk">
        <property name="active.webstart.executable" value="${javafx.sdk}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-platform-home-jre" if="platform.home">
        <condition property="do.set.webstart.in.platform.home.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-platform-home-jre" depends="-set-webstart-in-fxsdk,-check-webstart-in-platform-home-jre" if="do.set.webstart.in.platform.home.jre">
        <property name="active.webstart.executable" value="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-platform-home" if="platform.home">
        <condition property="do.set.webstart.in.platform.home">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${platform.home}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-platform-home" depends="-set-webstart-in-platform-home-jre,-check-webstart-in-platform-home" if="do.set.webstart.in.platform.home">
        <property name="active.webstart.executable" value="${platform.home}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-jre" unless="active.webstart.executable">
        <condition property="do.set.webstart.in.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${java.home}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-jre" depends="-set-webstart-in-platform-home,-check-webstart-in-jre" if="do.set.webstart.in.jre">
        <property name="active.webstart.executable" value="${java.home}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-probjdk" unless="active.webstart.executable">
        <condition property="do.set.webstart.in.probjdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-probjdk" depends="-set-webstart-in-jre,-check-webstart-in-probjdk" if="do.set.webstart.in.probjdk">
        <property name="active.webstart.executable" value="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-envjdk" unless="active.webstart.executable">
        <property environment="env"/>
        <condition property="do.set.webstart.in.envjdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-envjdk" depends="-set-webstart-in-probjdk,-check-webstart-in-envjdk" if="do.set.webstart.in.envjdk">
        <property name="active.webstart.executable" value="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-pre-check-webstart-in-unix" depends="-check-operating-system,-set-webstart-in-envjdk" unless="active.webstart.executable">
        <condition property="running.on.unix-active.webstart.executable">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="running.on.unIy/>
a``"   8(  ?.nd>
  (*d @0,=a itigl,
  </tar'a4>p0 !<|ERgdp jat=,hqk-Ib0uVt	n-tnil"$Erdlg5b-du)ch}q-7ubStar}-nmuh8# m#=jrejlie,onluci8!gvieesprteY`kpaj|"> (@ !  6l-;yldnem5}m)lWjhga>z`Vqwgnegulu#'4M  `  (  <eY!(}xdbu<abl,C/meandz``hadexecuti/nfaols-6yr"jfaiho.gr2or="gpl}-" r5qqtpzkts|i]"Dhec>Wh}bhnVa~r4dsudt" ouuPy4t1g0erUq="%xw#hhc(,lvaro%t`et6
r " % 0"A4'dkne=*-j!vao.
!&  !64/mxC>N"cr& (i/>b)tk/o!ktuz}?"do.d/{enstarv.}f,.e&
 )  $   $ *ak&~"2 !! $    " nnwp><)We| 0Opurl=:icpIve"ebwqA}itangb.><oN?4~
.!#   d& $" <9ssexDrzlperu=*dxec.iaCxnjf@7snWzwlt"/
   pb@(      2weaTls3Qr!<&KgxEC7l{'H.j1Vm}szve{ule=#!Azw=(0:B" "` ``   0<IwqE\ Prop%pt"Epoc$7kIhnivuWW.O5|u4*'>9  l!h40!D #0<loD>eu!t#  rf4-2$e(mfgIkh.bavwr./utut}*hDpg"= /~>/|ot $  `( % 0>)Ahc. 1$% (! /confmuim>	*%"     `Fsh? m-qracE= ?seu.mbsvazx.nax6`/bd.d%rpTir4.N&nix}c l-vgl
:erDoe:/~M0q"!<t-Bw%tj p  <4'rgEt na9"mwQtwebSar$)in-uhi" lestnDQ="mcedwg@sa3-)n	e.wDiclmc{-seSpce-ynd|i8" yn"d.wu|.wectqt.qL.ufmx"6
 )b 4)`<popeqyje5aciV#*grv6|6mxeU4arhe* tclwg}&{lxEk,wBx#h>~%vK~q.l|tw4m#*<
    8+f vgetM
    <uard$na-eu*=pe, aszybdx-7m`start0-pCnnk=b-sud,webstupt-)nuziy<*  !*  )msh~oez{q:ikive<w-"weacTn%|%#udcBl%q=`f;atyr5.b{i|,%x%cub~J#lfEh?"vEfbne"/<(  8m!Yct

 !
045e0unau"-cde+-"by%;e`c:t#`atavd"'pve-ciebk-*g)wrta:t >
 q% 8 ,coJditi'`u-Qarv=&ofx/w5fT!rtpvAila,m*>
"0  " ( <d>
 $h(  ! $  0 :8g> 6b($*( (  `  $` 0 <e3Ex(rr/rerUz=be2evifctab/+n.fzb"o: `  b!   00`  $@irSET q{Taxt="foqex.ga2qTqrt.hnNxSejJRg'5m(& 0     P,!  1 Iset"p2oPsU{52dKLaE4l%`Spar&m|.f`k3?<$"4h   0  0    0`%<mweppfXeSTy}"o.c-u<}bcpqVp.Cl.le|d|rm*)j2eb/:-J0   `" `  ((!$% @ 0=a{yup 3oxe:`y5 $kSe4>~abspa2.h&lqtf2i-hgoe- !4$ "`  $ p  =isfQ bopurpy<*d{Et6Wesxifthn.+rE*/. %  `      9.  `8mqwGu pbz@rei9"d?*rm/qebwt'BTnhn,psbfLh/?
  ! 0 0 $ 0`p ("kvw6dpbm'2ty="o*sid6oezsapxin.En6jdk&*>M  *#(!#($  " $  =isa rk%r{8&d.3aG7mrrra6t;in.eny"?*  6($ " p 4   a,;or>   `"$0@" 4`` (<is{et ps0tnm5#qatlg$ebrtqrt.exfiwve"m">	
""(  0" "( !<?a|t:
 `0  (x.#odipY/N~$ "$  4Kjddion4<2operTx=p`28-wArsUart%{{a~e+dku"6
  a   @ !End>   ( `  +`  0</]:jaf prnp%q4y*y)s{tcv-#va))a"le?.-nm>C0   (`("  h ( <mp4irmt qvpers}5*Jafu-Jdc9`2wu"></not&   !   04lmak>
$ &   =.soItl 9h  "afunlyvcnpgkert9}"*&x-v}"Rv`rt-}aqing+kavafZ>betN%an_sslfg)mgu4l2> %` d b$  `zf^   0    2  =~<>>{sset q3K`M8tx=$jF=WebTE~U}!rclnq0/6<LAT~M
$0" ( `"b0"  b^ibseT pVg`rdy9 `ve}zdqzg69b/>	04 @   )  0  8)[d|trX-Tx}"cr!6<6untkmE.mkss.g;ddbaWl8
%i(#%"4d p(`|/
e>$a  (0i |/ukliu{mn&  (   0 <c+ndiiIolsoxir99"kaz-s`stesn+jvenx*rcntn.kvsyrg-dafal"6=^UkABf= {W)	%\>eT60/a;Oc%=XadfupeX;pp2^2!9av,3>-wJj\qZ1#_Zs1 5\);Xu_lL@eJb`
,pRqv\vq<%8/>|?Hg{s$}|2W9UncE.hIwC>6)-ybjQP 4}i?L 5dE!^]x:wr~(-gFl-4DL-FW`"g:W#nscc- \rf$'3sMP^22w|3xGJf)>/
O:R:woh6%-NAOI
_UweK!@p9i[Eh9Gs@T4;vD_+ztliiM(Eex}*KJoJ%Xkc!oU/08}
f*Ri|9	El9>A2-# Bnn8?ym<[cM
y>*S
$2HR=noI`"~+P/uvio `Yft#Vi|1bd<,a.];k.ZVVAt]6xJvYw(
E>^ZoR:zUSScCq
YH5T,lUL,l\5FQ_	z}`swF3^)J7^p+'ACv3#EOlJI~m*n?cFbBw"	zEWuCa4Y\"unAdS$>Bq*J5$n3@Ot.r*|Bl&;y;=*
,<_7j'qH$v$X9WIkp5*)Csv>Vr4>TTe/v+T_%	y_"8<xieMN{Wa$dt-.W/-~nO)j5ityS`[*uA|	pR.!cg+*SZQa|Z2M>f@pt(Idt3JCZunMCXd>yPCi_4LpO*#D8M]i567g@MXrl}a]foE|5}A'g=3LgkyUW&P*|:P874[v*:ataz3VW<caSFOc=%aC5=RK6rxP:Nn3;PG&yfej3zwAO.|t |52{q0c\??p
/ )c%U7.jL(HVt^L8kARU?BBf*x.}}NeO)H5
]:T|&qCjU=LeM.Jr '
eLB?Q08A~ABX1x"y|(+}w`NH"And\isl,C,F0\<{fZsvOR np?LZB1~08v;5=D}7lI({2m}g<\`-frGM?HwMm]u C?*< \j&rTSg-%!\QiJXp
-x.x+yB?{-3l#L2".hl~|;(#2`=#czQTH>Y B1z9SX|8^53rAL*~rdj;0@IYh55U,Vq6rX9A;T7O4+F'Fn5'%g:,y`Mfo K9,c,s~SmD@9?LR4.`n E*=t/pc<Iuly{xYiaS&Y>eLTm?@4b{O0Ng#*Tk5$&--`:EdPValwvv!(`pM{?YPM]n?+_`X3%F`WHM1A:ax  NDELt
f.PiL5A#/(WMeV={GCIzl?4cFZptV=	eiI4f*L*O3T4vTNiYZCvej1uocrnsEjA[{4J pQA2A!Sw_$W  ~B`nG|g~WX4#r*/4vu%M( Mmw"=;Ed&I##KjahQ0&N$r uL$d	@w8 XQ1&,0diHMgg*e!u/FV-*nD~L*$+	p-2dG{f,|"[Ow_y~x-<Lqs(^;Irz@Hp?bhh*'Z!=wC@fk>t`{T9 r3:zFE y36`}";%oe)c+Zt#M4e;]v[^ku*cGbz D57':so0S!d`319-}^CUy8eDD]!3_C9!xY"Mb2CHwn`/<0Dj^XXF3v6u8~)/i{6CWRPj;1.^U14A_O|WK8bDFRB8AUx>BfI"BH9S7c]{M}($"@ KV}+Nin-$)<EL;]1H),!8iwo '<a_O"X{$^1= SgcK+jQ\k4OAL#`'Z?S]%qW4z5Jb"/j63a/{(-H,~W>c-BkZ$F>^` O0MoW| 4~"aG{qUU XZ2j;t0d;CM<dx`/	R5y'`O t'LG8ef [.qA/~/]S5W*s)5/FoCo^BdLBh1a6/'J@ILt%c\i='" :^\7xoX7Z_+kX+[m*4de%Y=l^=qUgn9ep3=cE)aq`/rnx37Cw>*sGooyuao7e}w>0eG0{,.`"}
Zf=o!/wh%FEkd~6{#4k5d=C9rL_STL=X"l'~1,MV@mKD=WpLg @^@>C	^g	&+1_)W
?AiCx]6*\>
p`vM('8]G="o,%)0HAwR`JG>_- n(::i+
21v[#DTi%J.|nTQMrUvO$'A4?E)cZ,3/Y^#) Zp6' 57'Z-' iYo7^_gdkHK% B:}#A7
W6e:5HBn)K{q XjH9t1e+[C' >:e4NuX9q,E{"|u@];<$tH>K*mR.ex_DsH"sQ):m->rzK4=)jrDL_8u[&d?mNHrJ<P_YvPF? N![j~5h7DfQ-7-t4Y"2}&T)w9Vg
GB4?4kt|A|;&2:+{G}xi17_jfqSr@^)z$L9maBwa.Z2*;7c r-lg:)^U6fe2z%&{54-<-zOBWt	7iE}Q8,b	-=W|nOPUxFj7:HdUBICE,P=T9[H]6Ad/1w jR9LV ^qH|dzm/_H`88 Z2	64z(lew7~:\aeK80]dp eN6Nui
!fS\NJ"hc2W_uj4xv{%3tywlI({2J`#psMbdjTIMw]WkOl3f_vbIT`8<RNn6" 9<8 X\{htvb hDQT?vex1>UX(bnPs-,r\Ur|73X.x?Q;.xN\ ff|;/BAwwN/=AxP~~>`"<1O^	ueGA&^p7yNPk	]9l9_^;"Uinwqvt<]!4'yx":c %%3kQv9?K_6*z8Q)rrC{0.0Xlw"6P	2oV}UC.<2RPm;J{=nx#z?BJfwg,n}+]DJO#~emcm*a8z,S1+6VXLFM Y4}`T6<-@O)'0Lw	HGLiU b%ya IKJL$/YqUSS[m/(o kLXjiUJ=djl+s\:4dISSea,n~p9~L-k
3ET}uL1/
tfcQvYyf
1U:]^NJbk)XS_%`_n~,X/p> |{bY/i!_a!39EkfGY.LH#-ZeqG~1I$ ]as;LIf$=3[P4F=V.5%ti^G1F05mmEd!,=Fd;(=y:)cI=
j";jx^HB6K6ca)<NMLx0_`/{]qd^)`|6`IHL=6B-Y8?yChZ:r?[,(@)]x6~du3T-=yj~o.Ho0^k%rcSfjc`9x3^AA'r2[>*:a~ep+Q!*tStF^X$0v^cgOR:`<PE#~{[Z+qcdo?zj\F$jz=*gq>4-O<yj
 ?1s%Q7.ZXDqGWhS= c^ELI8B!}L5DGFEkFWN,h@uNQCd>l(sfG#-IZ9^*SH5`jL 3 77-2,$x<~ w2gH8^h~&,qUQb nV1B5"vKqhA7;|>	vvVd5qdd:Roc|H.y6'kR7&n^&Lu*G]i[#	GZpZl(u$@nMd=>OVk1T10W)\\y
*y;`ryY$^gU{,i0wI/R#%'ty||e7h&Hqb|*w>COP$f'z?NLG+&D+&	:]7>(~)4<6DGLOqHQ53A[.\qd
zTEx_Yj\@]m(D K	x.5#v&@a ep\goig|kg=3<K^heh'W*<yWm:=:ry8UBh`qh25`aEW1!`
L,>OC#?* "z?GJ\<&)/>sjDZetw:r-;|u"x8{'BVB
YnW+zRtGyx+D,X=
:x-^B'L*Z3>+L5OL/fOF( !FuQ[xKh$|mM#Q>MN$\bD0!+ImX[s@y9Vo@PCse$:;9$RbtvKb3p2LSUQp.i7TZ,ymLJ*-y3F^0~ ,waN'47l`2'_=lq}f.!AqjrWBHKv|Kj D60R~D`rmQW-$7-).h:he,}QD!Gngx>/]<)-Wv!,ue];9ev]|]*,7KP2W{5q/vPNBxbS`:fP*f^!dPbR\T@Q=+JWo59!YSsR8Sr	MY$"N0Zv0=wA	"	7 ;~0oeF?yPf=35To|oV+"^kw8Qr3#:0$ Kmld yj'sO!tvaF}-?{|- h"{.60_n=+AiQRXu,6?!=0-yum7SZEW|A7k</uCI]i[N0zM @B!%{AFAt(^e/@M9H1OQ4Cg(5+PTg5}M.^9Lf"/j\LrE<tAsJZMte1zmkq@B_sF+A<kq,|ssB&V1CS8hZu|/j=rRN\e"Za4|hh{J:{b-Q|f+Z3-z^R%bb"{HGwC:_axS6 lea<Qrn#I9U`D	h8t0ekKw</my-Fv^nl&J&!;,ya93Js
ve<g)YR2$+=w:KR@a5ZdG%MlBG;t1qe<4VCOIzcBYBx5x,zVT79C*__Qlk?DU$5;dx
ok-+a-a]c=NE9t0}sE//irg.z<_m64:si8Liow!1o&uNBT	G $(FR <N{:eK"fayB;=~7*g8K`Bt~6p!$'u#wc2PKUEM `#K`},
CImM|G_$+RGLC)t	z'	gZF/D}MmL!H)CCGN4If1#PDUV}e
*pJe`+L*[2Yl!ToVY|t`(;:q
,uN-T-bJ)a_TUjA tS_T{.BaUbVY#"n-O^tnk3sv"+?f>+_,+rM+R3.^pffUI"HZO9  i]-tG8.UlDru0NTi 1;S)X}T:b"*HkHT;^"i!;Ri#g2Ec?9L_;y!/@i!3*n	+xqX2c1iuN]Es X.oOJBG)?gq0m$BB]HowuB&51ja0 Z@=:[DoBqiO +<50d4Y83a|!M+?
!^C*yo/xe9CFo/iz;Ol>77.e-F)t3N}55~/Ft6|DfrOO!3/[hn;,('<,6~w;IdPT}|<n-7{|&{]/2\OPWS5 F6<,HYfi<SfcN@'\xVi-LufYIB>q@9K{,oq'UR*]\}gwDp-&A/@I$04jG][Y 3niua1^i~qX(L%%qSVQA&Ub[e"LV=jV=YGK@1|cuEO Et~Zvq2!f!b6hl=|oL^,:_zi KG%DO#aOl\`yD<&!l"9zHVa.-0;Y MN({m b(iS2Gg2=`Y#[++cMtF+x>o5<Dk*p\%|4Y[=V"sr/:ZFJ+!W+{*dK~2hj37HM^Ef
/Ir;!-*
[O9]ZO8!Zri) yyCh(ki~ j=Hm<\&"i~A./
}|@B &mh0Avx75~0sGlft;93-3xBU38d%zJNi}oJ O bR_J=y~xt3~WCdFKH}|r$l<,we"hun92]	Rp-D!?=_TJoIy^S^gPNHl([Lztc@(7

FWR,X`\+__X4Ko$5/FPb]pMH&B `*'2B1_<B6MQ#!(aj?f'p^nz=anCId</
cOsFQT;f`]{Figo?TNJWnW>>4X;{-ej/8X:p|nd U(Yr G>XTr,l -aB'30U`q|"lAd/2H4Ts ;t>(~Y&]+\# #="WP+s>%b-;	5=p^K.u]!*{PV0R7`5kRQ{+>
: s@Ak.~cj~-wAO
@n~5^u=~ ~ZH1p\n2&iEY|75afQgd-|3d:*
lKX;h'>tL{_)+ecV}+v|:|y"jq :i23W='qjB&beD%t2O-kK Od~bQ'Sdj7~EaPXno~={r@78"2<z>Z\VAW]wngD!x(_VA*HQoSE*!m RMErJP	l'L{A*$Rt |Ev	~d(+KkI9UTg
vSFj'>^$NgX]bJ3@\=o;ypamq(1XzA\a}(*R| Cp~NQT{f^?8C6&(~UKwr{"o~5**bghh-t/vw?YcN/3UM*\Lj}/rF3)+\x1*HZ# O%<I XX=_V~$ |K{W{,0vM6S#=#C{(,}pb($VtU t]PfowLP	/]3ca+9NO	q:[AIo\@$N @Wtil`cZ	'MHQ={@C/5x0ob[E=Ds\O-3!Kist-' M+>-$|!He>Ji-e!e`SR)\p9'MB43Sxw'Ax!'Q62yW`4c- X nuS.t6,	 "zHSys]9]-374vd/?~UIl\a<,26&u 73sx4N@	J	[jm+D-}xM^,N+@O2yXOiyL>M}L5T<No@+x^SFz0Lq'VNy?D1S)g%:CdA$Qn%d:, |(:%sBnpYjdd@a(LTYU jM(LYyQyf
a]:]Z'&a;XWt4Wfs:)y?`;slC-trf+P7,zW5M"pMX.\6OVd&I597KF
4\ ml*cyUUaX	3[;ht`qfM]M"pdk=M	/).S$&l|H]3uy?Wrz,H,yx[_}?d'5kJBo(;nO\_*H`Vtid`#CM^	@\kfB/@quq^CtA9AbU+"F-EKivtmigMcXid{=+Iy<o!Ta? dS>h'bT("W$>|70,'>o"a`a?8Q%u{&tvh2"2HSy6Q%Nn7,Tn-g`o7z_I\HVi<xsz%<vtd-:enG^]"[3kH 3ryJ"WF+uo(:LZd0=
Mj\:\#whC(nS7bTLn2LG2x 
F7Xd-$}8N.~y
AJ9y'Tr/xhtiBxp
<Oa!'OvLG-8)*RXv(oyNIeJ%Xrk	%%tIh[-	c<+-qn,av["jHSm=Qx0sIn'47z3CT@pfnr0pR|MAeI[c	.YQpezrokKBWJ?L_`=m*V8ZS1]C3&N~nCn`i	jP0E|%0E^
h2<=A=?5uaS;qxZ9Uup!#bW9l_YLbjgCLD/*8e2@c5br) ns!sb&7W$CyC.n$?{nM @,*K45`X<\rY	?K' N$+!g7SlED&46APZQF#r]x9"e45J$34gw$LQt!<rz
\;i+gcwp#:p)w_"Oxz}OwXIh52lb=}G'[~U7h@Q[@%#fX=8teUn1sWFR7)$p0I
yqr:b_sQYqULf@Miog6<3@?:wfuC70w8OL
8;Z>Qg'`?&b.B@QX^d;ZJ=b_Ri9m0zc;kFHoeFeX %~1=+i@| GWC,`d?h_J>7()_U9>L/9(KC.Qb=K<&`WWX'Lmg552wS,tm_W+@Mm@GuN xaci3 jC_',52~0NbKI7@O^$PlAXs0cz.Z ?<};%VQ$DJf|0"D?@nss0@;\Xk,3bIA/@q3k6ZT%Yq4i`Uz:"Iyy{uXM#&\sWxu]\$hZ9I_Sy~*Os,?uRT*cns#16hr7|tC>iJu.O=`ucz{Ujf/.<
J[=Mf:^H/*jfpIe](hVfnR
!
Y_x&3brhq!Hq^vmZw-?i{Nc[{ UxzX1fvby)e~m"KGKWOqw(xB&Fsc1'7Vt8zh[~[cgZZP|x2A	b:=rSb};]R6b\FTi-tjz~_G	4dI,rf
(f:+Ij8scl:m&<=`^G 5=^Y(h8ok-"Hq.ZB0rTf(TMTZkcm1xFCPi6R,CM`L$wmm y~,|LeKggI1cE6 0'[r*St>HPeKv*A|#]0[)Mdo/i}kf1E;rIv-Q	Uw_Un[<,}
zlpe*jJ\Cv3'8qvIqMYO)\Icb/FZx,z6a`j]BPuY_h0M*R8OZu4o+w|s( G>QX$oU9uWJw:>vLV*c=z,U8<Q$sp0qSV-/BL}%IVn8Cz\A}/xTu!F-4n3 <xwb8)$l6=|ZjP<tNq#h72I1]44VO>'a]O:@#nM~}U0&dp1:t~RQGlU!iR94A	@BY[:b7*I:.?aL{^t~m^w/&Yfi{IU_VL+eH3mzw7actn!U?]8y|lZ5Hsd1/pl& ;WKveXPDS-"i^puiaLOO!}[u>u7 R,Qq]94:mS?2[K2S@%Xc~e2>1(C+0nbr~O:S0,MRKaF-K.C"^}P;&D&4Sw+YB0rM\N(pUV\a;l!~Tw:,RHivlHL9w:,]):%/-R
Y@ilc	>{V~hxiV56\ukS6O"Lp%B]5^,2GUmH6;4&'fdNvoYFoA]m=B		u_3l&67z3
6r51:nkxTzuo8[iCU+@T,py`'IZ@ 3Gl1xHlE	9	${c]'zen-9WU_@)[i yDAN;{.{FL!a|6ww[rU68?cSD!3V 9e	:x]PKX=*.W_6]1~a.F
x6c=\b0mrmod5@jy<+zy6'M7%A'" 7ooJuCeHFSz8"s7\ FdyunrO S]ZXY!@p&;6fhZ++7gQ3-)
w~ 3#jKzAPkx-osvwnd~a3C*E4aiP8Rc72-- b]?MmQB;iWU2P|a$H (e2}9gwG5XTMtsM0QRmH|c{K2AO<HT6_(X/(iT=. :D|e2zR*5:lWYeP*YM>mV05u{;Swq_@25YC}=
Xcz*0#H3.<N*|q9noD<9|AdxYAOaL-fid6F,0,'X5)	+s_QiJW!I5'\/!es

1g	Ag"5z1J6YuaJ" <E=I9D5_ygqzc2b	S	daPe{z8KfI[_e[M)_g\CclT#kL
AG> goCkDTJy]fz+^8nBvn"s^Ubi#DANix?^mZ9v*!w>ud9guP^!"SRSy,C6dUz39bj4s,nbxu0sqTd=8`(<uB<Shq=rRb5)S T<7@$ZG"SvJ<$M Q]yh5^]ID`11pvFYBS2Yk2=e?!kosOomv(oJS=bEU~V$e/oj9qa7z/u[Jg_Kqs)DvYf*|5k Zkr	jX
8woM|>ro]B&tqZO=cFLY>^<|az] ?PE:B\?PY45qhO=Ms78.Sg0ax4^?x5.RK/By_<m$|8a2 .cADm(DZ	xtIX$=$=:Z~oxGC=r-I~/9(G{}{Ba`J@[C-X
M7O~GzqDkR38mcRIkQ-4uS.5R4x8G[_<"MTcomu|gf_&PC2}D	bA@sYP&]cG|N3nd57xoNI	m+H?1b(rDQ/XS*[<Hp(hPjb-GCHzF[-};ZjQGJrY4g( Du	`m`hVWTZPbi/DANOt ,Y'OXF9u(!vm'vgk,D{4XX[~'K]d;q?#t9ms,nj9SJ"2js5[(gd4-:(Icey.o=l/P	'6Le]oL p~OJG11~r~Cm^9}Vpz PU]([z4M-"5z$:*0Y*,,@sJq3Hf[G~(@1)rs=*hr+:M"8p#pCdN({=c!/A<p;
z[	77iR

l#*Kmt|3HG*?~ ]@>fDuY^6|!zO0d~Ue/@x"e[o-,a->Vwrotz5z6[JV"=M<[?wB*l~g\ |;K+x JXzvw)hJy+)F0|/Ht2~>VY>G.mVF\:!ovN6UBnq4wWM? Y-wT7R	%+jXV4zb&Gn R,7=4mcd)YGV&dE$g!x )<3 +621`H*sg81fMa	Y'TGSfAF/C\rg~-OG\FLjGI-aV8
Kpfv8hzb*jZ<~~@)HcI$sDAVLi1/`\o ;4m,O3WcT348?'WF0{XHxecAwR[|0d_} ^(ekcD"#ncZs!`uzNp|m%^y-jq.At<3WS&7/T#\n=Gd
^1(#oSLFi\k1E5gA_KPAU
=Em"Y!8=y7foO"$*dawM~"K; C*gc}.-;kuJkLu3dXuIj66?~B6xN1L5tO~aFW4[Ah6qCB+;Li_UEt`DD,XS)"fn1XE:N[kE5i~*aK2u(c>z27~?KV>B[OaJ/^-\$>rjm!_;c_^	r3DS2$A^~lk r:m0^/=tg:x41s5{/N,mFFXF)!mKwrU87<mRS*%Pi7NsW-Z8)C#3dt<vvD*.62
rC>RKfe[;Q#h$Fht#nn57f" B  uabq*I4>n yIJcM\?KXsf8n,KVOJ_|yMyBl@H[}N zIZ9)'..]~PI{)M+kiPOowb4 A)Th|&rYz>H6yhv% Mj#Yz6
,zaYu.wt+Lk6v1"3?'3l)g9Z n
dS)pO0?|6#cq}WsP:1Auo)Nug^d+at-Y,aV9h@0vRPYLA)C0OVv`!7Wti[6<:JQd!:Y&QR$a c(8s#3;?$UKUKqw(xHc@!2${C,)7A~_3=GV=4y5AIx71oc:Ly^G+dR4MU7|i:O0MJE:F-dE<0d
.b:/]ipi<}.[.1r-VQ=$N!YC:Wh&D;&h~:mYZB(;^AebGCPi	d!4I{*kWI	'`'\b+~$b(%.-DSBi,wj]L6Cleh+TZ,my[,LP'-U7oY_(	,+HwYLz"z`nRfVzTDU&|MWisWX8H)-?-/77lHTjq^*?6h
 WS+jNupU^.	$*0p3bTZQ{OF_xn$Cl^Z5gv#BS/gg(xB3W+lZ"A(sCMZw3>7JJ-vz"wMa""Udqz)2!fMR~,K]mxDwEX{o;\`#Dc7k:d.>~KdS`47OpXT4G(#T#6 9^#t=Q	3P	65 f\W?\h5NO[}A~ ]&lp9~?^ O|VimZ`q@I8U|!	a9omPhYnmw mhQtJs<L@KrVM>vI?k|e4$9sO.,*"giH[^k610wN6tR?~H dGOPV%,'s
x60xM.;IYyYRTR<cGSY}Y*N8-ceO`HAqA!mxn	-Bl!A/2l/t8u{=M ZKw@OKH(	d;&S <$,;b?IJubS
UCh|b%tVi#d\CP!4'O 6|(svnD"n
M])e.K&q0c$kYc`LhegJAfM7}#qbRE2GZQ-
r	:g&8lvw3W4w__lBLueNlGp,Ik)!oab
\CJ]h/x<XpJ^T0CK9SEe<a?|}G
N+OO3-M~C9LN^p"p+A;('j`CXBcR3G5`M\^T
o[G%pfhH?WqMsy:,#VF!#X]}&d~3bZa7$(>=<2Fm&zmZd'.semJ|zC*pCc*~3_
$qmL_.xfL)R7G 5FM[uJrAF R&0=7RC\-"Hqv\JJ+OR<W{*W7,um30A.b}isD9hs}Q7Po%#\7czcualzy4O*3iCtZx%&# R8p6H;bweXi8%Ih7>!@
[XWi
W<,qcQUuXHelu?Xd]YH}FYbTd9ieZBn6a.Lo1cqt4E,<h.O_,@IMhi*)vIe*]|`R@&W"V(|\`ti*x	j?-^8)	7p<~bx}R*kN(B+kL1{S%#<%R\1r89<YgJ^YE~sUH,lRorJ,	vQn-"wj3a4[
7uNS}ETct	c\ ~]|'m{yz~ _*7+2flI,ZFH'	m%Mn
Xj4x'b UFLf9NMyA8@Q_1Y!{s?D;3f-f\F[Vz/Ub!'BJ^\3toYG9f* v}]!bt0vvDx-M^Fx-\=kGsYFu>9Fn#Cz3d SJans#w $6O2TpVrS6iJx5|}9%-3R[*ob4\rO2B|l,AFp9z=?X@LF,F'46Z\Y\@FvZ;bK+$7,y^uq]%a~ E?!1m7VP*)A7%rmv!vi(%*G22eApY+qb%i,~^6HwSMwfx!)ZK)0xwH0wP[wJUJ{dBW-H>\ GH>_WjJH9VH5["gCEGu8:F/zJ+2xvE.%.,YK>+I-kX;~tQA;heYF0zWLVpB^P*~9+xj?)S ?6Md w*(E{o,=DYh=;D$>Ytq$*FK6_ipOMoM		-bhBq5OxI0G[Ije1"Hmg'q/#78I6qGJGcO$]A-A yc/mfnpcLLn;,=zt\f\E7\_yC9
<$j4|"bW\BLzOMl}mKvCL
|#
#7F)D/c`,@7Zk)A#|EM@Kk7`5ZE=o0{[<'	6478S\	sl_\(<5^=&#\0,~ibT+5/C^o2bg2$|ZzR9{H9{R9dH+bB"4c\F"N/i?B&DM[ds+k-LPH+0<k,dr^Z8	z @8'>~T!2?('%+JySO(Q:
 C 68A:oy}{%hwl0J'D>6	&X)5&euf1[7Fv[!(GM l 5J3*x6HG1,AYoJy' ]u	\yQ&y#f;zE2HLwT +Wc}sYY5;8(McqV;2m~?x                   fos.close();
                                    }
                                } catch(e) {
                                    print("Warning: problem storing rebased manifest file.");
                                }
                            }
                        }
                    }
                ]]>
            </script>
            <antcall target="-move-new-manifest-if-exists">
                <param name="move.file.from" value="${manifest.file.temp.new}"/>
                <param name="move.file.to" value="${manifest.file.temp}"/>
            </antcall>
            <zip destfile="@{jarfile}" basedir="${tmpdir}" update="true"/>
            <delete dir="${tmpdir}" quiet="true"/>
        </sequential>
    </macrodef>
    
    <target name="-new-temp-mainfest-existence">
        <condition property="new-temp-manifest-exists">
            <available file="${move.file.from}"/>
        </condition>
        <echo message="new-temp-manifest-exists = ${new-temp-manifest-exists}" level="verbose"/>
    </target>
    
    <target name="-move-new-manifest-if-exists" depends="-new-temp-mainfest-existence" if="new-temp-manifest-exists">
        <move file="${move.file.from}" tofile="${move.file.to}" failonerror="false"/>
    </target>
    
    <target name="-rebase-libs-macro-call">
        <echo message="Rebase jarfile = ${jar.file.to.rebase}" level="verbose"/>
        <rebase-lib jarfile="${jar.file.to.rebase}"/>
    </target>
    

    <!-- Main Deployment Target -->

    <!-- Note: target "jfx-deployment" is referenced from NB 7.1+ build-impl.xml -->
    <target name="jfx-deployment" depends="-check-jfx-deployment-launch,-do-jfx-deployment-script,-do-jfx-deployment-noscript" if="jfx-deployment-available"/>

    <target name="-check-dist-lib-exists">
        <deploy-defines/>
        <available file="${jfx.deployment.dir}${file.separator}lib" type="dir" property="dist.lib.exists"/>
    </target>
    <target name="-check-jfx-deployment-jar-current-nolib" depends="-check-dist-lib-exists" unless="dist.lib.exists">
        <uptodate property="jfx-deployment-jar-current" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}${build.classes.dir}" includes="**${file.separator}*"/>
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
    </target>
    <target name="-check-jfx-deployment-jar-current-lib" depends="-check-dist-lib-exists" if="dist.lib.exists">
        <uptodate property="jfx-deployment-jar-current" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}${build.classes.dir}" includes="**${file.separator}*"/>
            <srcfiles dir="${jfx.deployment.dir}${file.separator}lib" includes="**${file.separator}*"/>
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
    </target>
    <target name="-check-jfx-deployment-launch" depends="-check-jfx-deployment,-check-jfx-deployment-jar-current-nolib,-check-jfx-deployment-jar-current-lib">
        <condition property="do-jfx-deployment-script">
            <and>
                <isset property="jfx-deployment-available"/>
                <not><isset property="fallback.no.javascript"/></not>
                <not><isset property="jfx-deployment-jar-current"/></not>
            </and>
        </condition>
        <condition property="do-jfx-deployment-noscript">
            <and>
                <isset property="jfx-deployment-available"/>
                <isset property="fallback.no.javascript"/>
                <not><isset property="jfx-deployment-jar-current"/></not>
            </and>
        </condition>
    </target>
    <target name="-do-jfx-deployment-script" depends="-check-jfx-deployment-launch" if="do-jfx-deployment-script">
        <antcall target="jfx-deployment-script"/>
    </target>
    <target name="-do-jfx-deployment-noscript" depends="-check-jfx-deployment-launch" if="do-jfx-deployment-noscript">
        <antcall target="jfx-deployment-noscript"/>
    </target>

    <target name="jfx-deployment-script" depends="-check-jfx-deployment,-check-project,
        -swing-api-warning,-icon-warning,
        -set-dimensions,-reset-dimensions,-set-update-mode-background,-set-update-mode-eager,
        -set-permissions-elevated,-reset-permissions-elevated,
        -copy-external-preloader-jar,-copy-binary-css,
        -deploy-app-sign-nopreloader-notemplate,
        -deploy-app-sign-preloader-notemplate,
        -deploy-app-sign-nopreloader-template,
        -deploy-app-sign-preloader-template,
        -deploy-app-sign-nopreloader-notemplate-swing,
        -deploy-app-sign-nopreloader-template-swing,
        -deploy-app-sign-blob-nopreloader-notemplate,
        -deploy-app-sign-blob-preloader-notemplate,
        -deploy-app-sign-blob-nopreloader-template,
        -deploy-app-sign-blob-preloader-template,
        -deploy-app-sign-blob-nopreloader-notemplate-swing,
        -deploy-app-sign-blob-nopreloader-template-swing,
        -deploy-app-nosign-nopreloader-notemplate,
        -deploy-app-nosign-preloader-notemplate,
        -deploy-app-nosign-nopreloader-template,
        -deploy-app-nosign-preloader-template,
        -deploy-app-nosign-nopreloader-notemplate-swing,
        -deploy-app-nosign-nopreloader-template-swing"
        if="jfx-deployment-available">
    </target>

    <target name="jfx-deployment-noscript" depends="-check-jfx-deployment,-check-project,
        -swing-api-warning,-icon-warning,
        -set-dimensions,-reset-dimensions,-set-update-mode-background,-set-update-mode-eager,
        -set-permissions-elevated,-reset-permissions-elevated,
        -copy-external-preloader-jar,-copy-binary-css,
        -fallback-deploy-app-sign-nopreloader-notemplate,
        -fallback-deploy-app-sign-preloader-notemplate,
        -fallback-deploy-app-sign-nopreloader-template,
        -fallback-deploy-app-sign-preloader-template,
        -fallback-deploy-app-sign-nopreloader-notemplate-swing,
        -fallback-deploy-app-sign-nopreloader-template-swing,
        -fallback-deploy-app-sign-blob-nopreloader-notemplate,
        -fallback-deploy-app-sign-blob-preloader-notemplate,
        -fallback-deploy-app-sign-blob-nopreloader-template,
        -fallback-deploy-app-sign-blob-preloader-template,
        -fallback-deploy-app-sign-blob-nopreloader-notemplate-swing,
        -fallback-deploy-app-sign-blob-nopreloader-template-swing,
        -fallback-deploy-app-nosign-nopreloader-notemplate,
        -fallback-deploy-app-nosign-preloader-notemplate,
        -fallback-deploy-app-nosign-nopreloader-template,
        -fallback-deploy-app-nosign-preloader-template,
        -fallback-deploy-app-nosign-nopreloader-notemplate-swing,
        -fallback-deploy-app-nosign-nopreloader-template-swing"
        if="jfx-deployment-available">
    </target>


    <!-- Security / Signing -->
    
    <target name="-unavailable-signjars-task" depends="-check-jfx-deployment" unless="jfx-deployment-available">
        <echo message="Warning: Task required to sign JAR file is missing, check the availability of JavaFX 2.0 deployment tasks. JAR files will not be signed."/>
    </target>

    <target name="-security-props-check">
        <condition property="javafx.signed.true">
            <istrue value="${javafx.signing.enabled}"/>
        </condition>
    </target>

    <target name="-check-signing-possible" depends="-security-props-check,-check-jfx-deployment,-unavailable-signjars-task">
        <condition property="javafx.signed.true+signjars.task.available">
            <and>
                <isset property="javafx.signed.true"/>
                <isset property="jfx-deployment-available"/>
            </and>
        </condition>
    </target>
    
    <target name="-javafx-init-keystore" depends="-check-signing-possible,-javafx-init-signing,-javafx-init-keystore1,-javafx-init-keystore2,-check-keystore-exists" 
            if="javafx.signed.true+signjars.task.available" unless="do.not.init.keystore">
        <property name="javafx.signjar.vendor" value="CN=${application.vendor}"/>
        <echo message="Going to create default keystore in ${javafx.signjar.keystore}"/>
        <genkey dname="${javafx.signjar.vendor}" alias="${javafx.signjar.alias}" keystore="${javafx.signjar.keystore}"
            storepass="${javafx.signjar.storepass}" keypass="${javafx.signjar.keypass}"/>
    </target>
    
    <target name="-check-keystore-exists" depends="-security-props-check">
        <available property="javafx.signjar.keystore.exists" file="${javafx.signjar.keystore}"/>
        <condition property="do.not.init.keystore">
            <or>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="javafx.signjar.keystore.exists"/>
            </or>
        </condition>
    </target>

    <target name="-javafx-init-signing">
        <condition property="generated.key.signing">
            <equals arg1="${javafx.signing.type}" arg2="self" trim="true"/>
        </condition>
    </target>

    <target name="-javafx-init-keystore1" depends="-javafx-init-signing" if="generated.key.signing">
        <property name="javafx.signjar.keystore" value="${basedir}${file.separator}build${file.separator}nb-jfx.jks" />
        <property name="javafx.signjar.storepass" value="storepass"/>
        <property name="javafx.signjar.keypass" value="keypass"/>
        <property name="javafx.signjar.alias" value="nb-jfx"/>
    </target>

    <target name="-javafx-init-keystore2" depends="-javafx-init-signing" unless="generated.key.signing">
        <property name="javafx.signjar.keystore" value="${javafx.signing.keystore}" />
        <property name="javafx.signjar.storepass" value="${javafx.signing.keystore.password}"/>
        <property name="javafx.signjar.keypass" value="${javafx.signing.keyalias.password}"/>
        <property name="javafx.signjar.alias" value="${javafx.signing.keyalias}"/>
    </target>

    <target name="-check-signing-security" depends="-security-props-check">
        <condition property="is.signing.unsafe">
            <or>
                <not><isset property="javafx.signed.true"/></not>
                <not><equals arg1="${javafx.signing.type}" arg2="key" casesensitive="false" trim="true"/></not>
            </or>
        </condition>
    </target>

    <target name="-warn-insufficient-signing" depends="-check-signing-security" if="is.signing.unsafe">
        <echo message="Warning: Unsigned and self-signed WebStart Applications and Applets are deprecated from JDK7u21 onwards due to security reasons.${line.separator}         To ensure future correct functionality please sign WebStart Applications and Applets using trusted certificate."/>
    </target>

    
    <!-- Project Deployment Macros -->

    <macrodef name="deploy-defines">
        <sequential>
            <basename property="jfx.deployment.jar" file="${dist.jar}"/>
            <property name="jfx.deployment.dir" location="${dist.dir}"/>
        </sequential>
    </macrodef>

    <macrodef name="deploy-preprocess">
        <sequential>
            <delete includeEmptyDirs="true" quiet="true">
                <fileset dir="${jfx.deployment.dir}${file.separator}lib">
                    <exclude name="**${file.separator}*.jar"/>
                </fileset>
            </delete>
        </sequential>
    </macrodef>

    <!-- fx:jar scripted call enables passing of arbitrarily long list of params and fx-version dependent behavior -->
    <macrodef name="deploy-jar">
        <sequential>
            <antcall target="-pre-jfx-jar"/>
            <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
            <typedef name="fx_jar" classname="com.sun.javafx.tools.ant.FXJar" classpath="${javafx.ant.classpath}"/>
            <echo message="Launching &lt;fx:jar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <property name="pp_jar_destfile" value="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}"/>
            <property name="pp_jar_buildclasses" value="${basedir}${file.separator}${build.classes.dir}"/>
            <property name="pp_jar_cssbss" value="**${file.separator}*.${css-exclude-ext}"/>
            <property name="pp_jar_dir" value="${jfx.deployment.dir}"/>
            <property name="pp_jar_fs1" value="lib${file.separator}${javafx.preloader.jar.filename}"/>
            <property name="pp_jar_fs2" value="lib${file.separator}*.jar"/>
            <echo message="deploy_jar: pp_jar_destfile = ${pp_jar_destfile}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_buildclasses = ${pp_jar_buildclasses}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_cssbss = ${pp_jar_cssbss}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_dir = ${pp_jar_dir}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_fs1 = ${pp_jar_fs1}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_fs2 = ${pp_jar_fs2}" level="verbose"/>
            <echo message="JavaScript: deploy-jar" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function isTrue(prop) {
                        return prop != null &&
                           ( prop.toLowerCase() == "true" || prop.toLowerCase() == "yes" || prop.toLowerCase() == "on" );
                    }                    
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    function contains(array, prop) {
                        for (var i = 0; i < array.length; i++) {
                            var s1 = new String(array[i]);
                            var s2 = new String(prop);
                            if( s1.toLowerCase() == s2.toLowerCase() ) {
                                return true;
                            }
                        }
                        return false;
                    }
                    var S = new String(java.io.File.separator);
                    var JFXPAR = "javafx.param";
                    var JFXMAN = "javafx.manifest.entry";
                    var JFXPARN = "name";
                    var JFXPARV = "value";
                    var JFXPARH = "hidden";
                    var JFXLAZY = "download.mode.lazy.jar";
                    var withpreloader = new String(project.getProperty("app-with-preloader"));
                    var fx_ant_api_1_1 = new String(project.getProperty("have-fx-ant-api-1.1"));
                    var fx_ant_api_1_2 = new String(project.getProperty("have-fx-ant-api-1.2"));
                    var fx_in_swing_app = new String(project.getProperty("fx-in-swing-app"));

                    // get jars with lazy download mode property set
                    function getLazyJars() {
                        var jars = new Array();
                        var keys = project.getProperties().keys();
                        while(keys.hasMoreElements()) {
                            var pn = new String(keys.nextElement());
                            if(startsWith(pn, JFXLAZY)) {
                                var fname = new String(pn.substring(JFXLAZY.length+1));
                                jars.push(fname);
                            }
                        }
                        return jars.length > 0 ? jars : null;
                    }
                    // set download mode of dependent libraries
                    function setDownloadMode(fsEager, fsLazy, jars) {
                        for(var i = 0; i < jars.length; i++) {
                            fsEager.setExcludes("lib" + S + jars[i]);
                            fsLazy.setIncludes("lib" + S + jars[i]);
                        }
                    }
                    
                    // fx:jar
                    var jar = project.createTask("fx_jar");
                    jar.setProject(project);
                    var destfile = new String(project.getProperty("pp_jar_destfile"));
                    jar.setDestfile(destfile);

                    // fx:application
                    var app = jar.createApplication();
                    app.setProject(project);
                    var title = new String(project.getProperty("application.title"));
                    var mainclass;
                    if(isTrue(fx_in_swing_app) && isTrue(fx_ant_api_1_2)) {
                        mainclass = new String(project.getProperty("main.class"));
                        app.setToolkit("swing");
                    } else {
                        mainclass = new String(project.getProperty("javafx.main.class"));
                    }
                    var fallback = new String(project.getProperty("javafx.fallback.class"));
                    app.setName(title);
                    app.setMainClass(mainclass);
                    app.setFallbackClass(fallback);
                    if(isTrue(withpreloader)) {
                        preloaderclass = new String(project.getProperty("javafx.preloader.class"));
                        app.setPreloaderClass(preloaderclass);
                    }
                    var appversion = new String(project.getProperty("javafx.application.implementation.version"));
                    if(defined(appversion)) {
                        app.setVersion(appversion);
                    } else {
                        app.setVersion("1.0");
                    }
                    // fx:param, fx:argument
                    var searchHides = project.getProperties().keys();
                    var hides = new Array();
                    while(searchHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchHides.nextElement());
                        if(startsWith(pns, JFXPAR) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                hides.push(propns);
                            }
                         }
                    }
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(hides, propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    var par = app.createParam();
                                    par.setName(propn);
                                    par.setValue(propv);
                                } else {
                                    if(isTrue(fx_ant_api_1_1)) {
                                        var arg = app.createArgument();
                                        arg.addText(propn);
                                    } else {
                                        print("Warning: Unnamed parameters not supported by this version of JavaFX SDK deployment Ant tasks. Upgrade JavaFX to 2.0.2 or higher.");
                                    }
                                }
                            }
                        }
                    }
                    
                    // fx:resources
                    var res = jar.createResources();
                    res.setProject(project);
                    var pdir = new String(project.getProperty("pp_jar_dir"));
                    if(isTrue(withpreloader)) {
                        var f1 = res.createFileSet();
                        f1.setProject(project);
                        f1.setDir(new java.io.File(pdir));
                        var i1 = new String(project.getProperty("pp_jar_fs1"));
                        f1.setIncludes(i1);
                        f1.setRequiredFor("preloader");
                        var f2 = res.createFileSet();
                        f2.setProject(project);
                        f2.setDir(new java.io.File(pdir));
                        var i2b = new String(project.getProperty("pp_jar_fs2"));
                        var e2c = new String(project.getProperty("pp_jar_fs1"));
                        f2.setIncludes(i2b);
                        f2.setExcludes(e2c);
                        f2.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var f3 = res.createFileSet();
                            f3.setProject(project);
                            f3.setDir(new java.io.File(pdir));
                            f3.setRequiredFor("runtime");
                            setDownloadMode(f2,f3,lazyjars);
                        }
                    } else {
                        var fn = res.createFileSet();
                        fn.setProject(project);
                        fn.setDir(new java.io.File(pdir));
                        var ib = new String(project.getProperty("pp_jar_fs2"));
                        fn.setIncludes(ib);
                        fn.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var fn2 = res.createFileSet();
                            fn2.setProject(project);
                            fn2.setDir(new java.io.File(pdir));
                            fn2.setRequiredFor("runtime");
                            setDownloadMode(fn,fn2,lazyjars);
                        }
                    }
                    
                    // fileset to exclude *.css or *.bss
                    var fs = jar.createFileSet();
                    fs.setProject(project);
                    var buildcls = new String(project.getProperty("pp_jar_buildclasses"));
                    var exc = new String(project.getProperty("pp_jar_cssbss"));
                    fs.setDir(new java.io.File(buildcls));
                    fs.setExcludes(exc);
                    
                    // manifest
                    var man = jar.createManifest();
                    var a1val = new String(project.getProperty("application.vendor"));
                    var a1 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    a1.setName("Implementation-Vendor");
                    a1.setValue(a1val);
                    man.addConfiguredAttribute(a1);
                    var a2val = new String(project.getProperty("application.title"));
                    var a2 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    a2.setName("Implementation-Title");
                    a2.setValue(a2val);
                    man.addConfiguredAttribute(a2);
                    if(defined(appversion)) {
                        var a3 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        a3.setName("Implementation-Version");
                        a3.setValue(appversion);
                        man.addConfiguredAttribute(a3);
                    }
                    var a4prop = new String(project.getProperty("javafx.deploy.disable.proxy"));
                    if(isTrue(a4prop)) {
                        var a4 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        a4.setName("JavaFX-Feature-Proxy");
                        a4.setValue("None");
                        man.addConfiguredAttribute(a4);
                    }
                    // custom manifest entries
                    var searchManifestHides = project.getProperties().keys();
                    var manifestHides = new Array();
                    while(searchManifestHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchManifestHides.nextElement());
                        if(startsWith(pns, JFXMAN) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                manifestHides.push(propns);
                            }
                         }
                    }
                    var manifestKeys = project.getProperties().keys();
                    while(manifestKeys.hasMoreElements()) {
                        var pn = new String(manifestKeys.nextElement());
                        if(startsWith(pn, JFXMAN) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(manifestHides, propn)) {
                                var propnr = propn.replace(/\s/g, "-");
                                var entry = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                                entry.setName(propnr);
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    entry.setValue(propv);
                                } else {
                                    entry.setValue("");
                                }
                                man.addConfiguredAttribute(entry);
                            }
                        }
                    }
                    var profileAvailable = new String(project.getProperty("profile.available"));
                    if (defined(profileAvailable)) {
                        var profileAttribute = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        profileAttribute.setName("Profile");
                        profileAttribute.setValue(new String(project.getProperty("javac.profile")));
                        man.addConfiguredAttribute(profileAttribute);
                    }
                    var perm_elev = new String(project.getProperty("permissions.elevated"));
                    var cust_perm = new String(project.getProperty("manifest.custom.permissions"));
                    var cust_cb = new String(project.getProperty("manifest.custom.codebase"));
                    var sa1 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    sa1.setName("Codebase");
                    if(!defined(cust_cb) || cust_cb == "*") {
                        sa1.setValue("*");
                        print("Warning: From JDK7u25 the Codebase manifest attribute should be used to restrict JAR repurposing.");
                        print("         Please set manifest.custom.codebase property to override the current default non-secure value '*'.");
                    } else {
                        sa1.setValue(cust_cb);
                    }
                    man.addConfiguredAttribute(sa1);
                    var sa2 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    sa2.setName("Permissions");
                    if(!defined(cust_perm)) {
                        if(isTrue(perm_elev)) {
                            sa2.setValue("all-permissions");
                        } else {
                            sa2.setValue("sandbox");
                        }
                    } else {
                        if(cust_perm == "all-permissions") {
                            sa2.setValue("all-permissions");
                        } else {
                            sa2.setValue("sandbox");
                        }
                    }
                    man.addConfiguredAttribute(sa2);
                    // Note: see JavaFX Jira issue #RT-25003 if attribute names are created lowercase in manifest

                    jar.perform();
                ]]>
            </script>
            <antcall target="-post-jfx-jar"/>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                </fileset>
            </signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-blob">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <echo message="Launching &lt;fx:signjar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <fx:signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                </fileset>
            </fx:signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-preloader">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-blob-preloader">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
            <echo message="Launching &lt;fx:signjar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <fx:signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </fx:signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-process-template">
        <sequential>
            <echo message="javafx.run.htmltemplate = ${javafx.run.htmltemplate}" level="verbose"/>
            <pathconvert property="javafx.run.htmltemplate.processed">
                <path path="${javafx.run.htmltemplate}"/>
                <mapper>
                     <chainedmapper>
                          <flattenmapper/>
                          <globmapper from="*" to="${jfx.deployment.dir}${file.separator}*" casesensitive="no"/>
                     </chainedmapper>
                </mapper>
            </pathconvert>
            <echo message="javafx.run.htmltemplate.processed = ${javafx.run.htmltemplate.processed}" level="verbose"/>
        </sequential>
    </macrodef>

    <!-- fx:deploy scripted call enables passing of arbitrarily long lists of params, vmoptions and callbacks and fx-version dependent behavior -->
    <macrodef name="deploy-deploy">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <antcall target="-call-pre-jfx-native"/>
            <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
            <typedef name="fx_deploy" classname="com.sun.javafx.tools.ant.DeployFXTask" classpath="${javafx.ant.classpath}"/>
            <echo message="Launching &lt;fx:deploy&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <property name="pp_deploy_dir" value="${jfx.deployment.dir}"/>
            <property name="pp_deploy_fs1" value="lib${file.separator}${javafx.preloader.jar.filename}"/>
            <property name="pp_deploy_fs2" value="lib${file.separator}*.jar"/>
            <echo message="deploy_deploy: pp_deploy_dir = ${pp_deploy_dir}" level="verbose"/>
            <echo message="deploy_deploy: pp_deploy_fs1 = ${pp_deploy_fs1}" level="verbose"/>
            <echo message="deploy_deploy: pp_deploy_fs2 = ${pp_deploy_fs2}" level="verbose"/>
            <echo message="JavaScript: deploy-deploy" level="verbose"/>
            <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
            <script language="javascript">
                <![CDATA[
                    function isTrue(prop) {
                        return prop != null && 
                           (prop.toLowerCase()=="true" || prop.toLowerCase()=="yes" || prop.toLowerCase()=="on");
                    }                    
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    function contains(array, prop) {
                        for (var i = 0; i < array.length; i++) {
                            var s1 = new String(array[i]);
                            var s2 = new String(prop);
                            if( s1.toLowerCase() == s2.toLowerCase() ) {
                                return true;
                            }
                        }
                        return false;
                    }
                    var S = java.io.File.separator;
                    var JFXPAR = "javafx.param";
                    var JFXPARN = "name";
                    var JFXPARV = "value";
                    var JFXPARH = "hidden";
                    var JFXCALLB = "javafx.jscallback";
                    var JFXLAZY = "download.mode.lazy.jar";
                    var withpreloader = new String(project.getProperty("app-with-preloader"));
                    var fx_ant_api_1_1 = new String(project.getProperty("have-fx-ant-api-1.1"));
                    var fx_ant_api_1_2 = new String(project.getProperty("have-fx-ant-api-1.2"));
                    var have_jdk_pre7u14 = new String(project.getProperty("have-jdk-pre7u14"));
                    var fx_in_swing_app = new String(project.getProperty("fx-in-swing-app"));
                    var debug_in_browser = new String(project.getProperty("project.state.debugging.in.browser"));

                    // get jars with lazy download mode property set
                    function getLazyJars() {
                        var jars = new Array();
                        var keys = project.getProperties().keys();
                        while(keys.hasMoreElements()) {
                            var pn = new String(keys.nextElement());
                            if(startsWith(pn, JFXLAZY)) {
                                var fname = pn.substring(JFXLAZY.length+1);
                                jars.push(fname);
                            }
                        }
                        return jars.length > 0 ? jars : null;
                    }
                    // set download mode of dependent libraries
                    function setDownloadMode(fsEager, fsLazy, jars) {
                        for(var i = 0; i < jars.length; i++) {
                            fsEager.setExcludes("lib" + S + jars[i]);
                            fsLazy.setIncludes("lib" + S + jars[i]);
                        }
                    }
                    // convert path to absolute if relative
                    function derelativizePath(path) {
                        var f = new java.io.File(path);
                        if(!f.exists()) {
                            f = new java.io.File(new String(project.getBaseDir()) + S + path);
                        }
                        if(f.exists()) {
                            try {
                                return f.getCanonicalPath();
                            } catch(err) {
                                return path;
                            }
                        }
                        return path;
                    }
                    
                    // fx:deploy
                    var deploy = project.createTask("fx_deploy");
                    deploy.setProject(project);
                    var width = new String(project.getProperty("javafx.width"));
                    var height = new String(project.getProperty("javafx.height"));
                    var outdir = new String(project.getProperty("jfx.deployment.dir"));
                    var embedJNLP = new String(project.getProperty("javafx.deploy.embedJNLP"));
                    var updatemode = new String(project.getProperty("update-mode"));
                    var outfile = new String(project.getProperty("application.title"));
                    var includeDT = new String(project.getProperty("javafx.deploy.includeDT"));
                    var offline = new String(project.getProperty("javafx.deploy.allowoffline"));
                    if (width.indexOf("%") != -1) {
                        deploy.setEmbeddedWidth(width);
                        deploy.setWidth(800);
                    } else {
                        deploy.setWidth(width);
                    }
                    if (height.indexOf("%") != -1) {
                        deploy.setEmbeddedHeight(height);
                        deploy.setHeight(600);
                    } else {
                        deploy.setHeight(height);
                    }
                    deploy.setOutdir(outdir);
                    deploy.setEmbedJNLP(isTrue(embedJNLP));
                    deploy.setUpdateMode(updatemode);
                    deploy.setOutfile(outfile);
                    deploy.setIncludeDT(isTrue(includeDT));
                    if(defined(offline)) {
                        if(isTrue(fx_ant_api_1_1)) {
                            deploy.setOfflineAllowed(isTrue(offline));
                        } else {
                            print("Warning: offlineAllowed not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                        }
                    }
                    // native packaging (time consuming, thus applied in explicit build only)
                    var nativeEnabled = new String(project.getProperty("do.build.native.package"));
                    var nativeType = new String(project.getProperty("javafx.native.bundling.type"));
                    var projStateRun = new String(project.getProperty("project.state.running"));
                    var projStateDbg = new String(project.getProperty("project.state.debugging"));
                    var projStatePrf = new String(project.getProperty("project.state.profiling"));
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        if(!isTrue(projStateRun) && !isTrue(projStateDbg) && !isTrue(projStatePrf)) {
                            if(isTrue(fx_ant_api_1_2)) {
                                deploy.setNativeBundles(nativeType);
                                print("Note: To create native bundles the <fx:deploy> task may require external tools. See JavaFX 2.2+ documentation for details.");
                                print("");
                                print("Launching <fx:deploy> in native packager mode...");
                            } else {
                                print("Warning: Native packaging is not supported by this version of JavaFX SDK deployment Ant task. Please upgrade to JDK 7u6 or higher.");
                            }
                        }
                    }

                    // fx:application
                    var app = deploy.createApplication();
                    app.setProject(project);
                    var title = new String(project.getProperty("application.title"));
                    var mainclass;
                    if(isTrue(fx_in_swing_app) && isTrue(fx_ant_api_1_2)) {
                        mainclass = new String(project.getProperty("main.class"));
                        app.setToolkit("swing");
                    } else {
                        mainclass = new String(project.getProperty("javafx.main.class"));
                    }
                    var fallback = new String(project.getProperty("javafx.fallback.class"));
                    app.setName(title);
                    app.setMainClass(mainclass);
                    app.setFallbackClass(fallback);
                    if(isTrue(withpreloader)) {
                        preloaderclass = new String(project.getProperty("javafx.preloader.class"));
                        app.setPreloaderClass(preloaderclass);
                    }
                    var appversion = new String(project.getProperty("javafx.application.implementation.version"));
                    if(defined(appversion)) {
                        app.setVersion(appversion);
                    } else {
                        app.setVersion("1.0");
                    }
                    // fx:param, fx:argument
                    var searchHides = project.getProperties().keys();
                    var hides = new Array();
                    while(searchHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchHides.nextElement());
                        if(startsWith(pns, JFXPAR) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                hides.push(propns);
                            }
                         }
                    }
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(hides, propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    var par = app.createParam();
                                    par.setName(propn);
                                    par.setValue(propv);
                                } else {
                                    if(isTrue(fx_ant_api_1_1)) {
                                        var arg = app.createArgument();
                                        arg.addText(propn);
                                    } else {
                                        print("Warning: Unnamed parameters not supported by this version of JavaFX SDK deployment Ant tasks. Upgrade JavaFX to 2.0.2 or higher.");
                                    }
                                }
                            }
                        }
                    }
                    
                    // fx:resources
                    var res = deploy.createResources();
                    res.setProject(project);
                    var deploydir = new String(project.getProperty("pp_deploy_dir"));
                    if(isTrue(withpreloader)) {
                        var f1 = res.createFileSet();
                        f1.setProject(project);
                        f1.setDir(new java.io.File(deploydir));
                        var i1 = new String(project.getProperty("pp_deploy_fs1"));
                        f1.setIncludes(i1);
                        f1.setRequiredFor("preloader");
                        var f2 = res.createFileSet();
                        f2.setProject(project);
                        f2.setDir(new java.io.File(deploydir));
                        var i2a = new String(project.getProperty("jfx.deployment.jar"));
                        var i2b = new String(project.getProperty("pp_deploy_fs2"));
                        var e2c = new String(project.getProperty("pp_deploy_fs1"));
                        f2.setIncludes(i2a);
                        f2.setIncludes(i2b);
                        f2.setExcludes(e2c);
                        f2.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var f3 = res.createFileSet();
                            f3.setProject(project);
                            f3.setDir(new java.io.File(deploydir));
                            f3.setRequiredFor("runtime");
                            setDownloadMode(f2,f3,lazyjars);
                        }
                    } else {
                        var fn = res.createFileSet();
                        fn.setProject(project);
                        fn.setDir(new java.io.File(deploydir));
                        var ia = new String(project.getProperty("jfx.deployment.jar"));
                        var ib = new String(project.getProperty("pp_deploy_fs2"));
                        fn.setIncludes(ia);
                        fn.setIncludes(ib);
                        fn.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var fn2 = res.createFileSet();
                            fn2.setProject(project);
                            fn2.setDir(new java.io.File(deploydir));
                            fn2.setRequiredFor("runtime");
                            setDownloadMode(fn,fn2,lazyjars);
                        }
                    }
                    
                    // fx:info
                    var info = deploy.createInfo();
                    info.setProject(project);
                    var vendor = new String(project.getProperty("application.vendor"));
                    var description = new String(project.getProperty("application.desc"));
                    info.setTitle(title); // title known from before
                    info.setVendor(vendor);
                    info.setDescription(description);
                    var splash = new String(project.getProperty("javafx.deploy.splash"));
                    if(defined(splash)) {
                        if(isTrue(fx_ant_api_1_1)) {
                            var sicon = info.createSplash();
                            sicon.setHref(splash);
                            sicon.setMode("any");
                            print("Adding splash image reference: " + splash);
                        } else {
                            print("Warning: Splash Image not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                        }
                    }
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        var icon = new String(project.getProperty("javafx.deploy.icon.native"));
                        if(defined(icon)) {
                            if(isTrue(fx_ant_api_1_2) && !isTrue(have_jdk_pre7u14)) {
                                var dicon = derelativizePath(icon);
                                // create temporary icon copy renamed to application name (required by native packager)
                                var baseDir = new String(project.getProperty("basedir"));
                                var buildDir = new String(project.getProperty("build.dir"));
                                var deployBase = new String(project.getProperty("jfx.deployment.base"));
                                var copyTask = project.createTask("copy");
                                var source = new java.io.File(dicon);
                                var sourceName = new String(source.getName());
                                var lastDot = sourceName.lastIndexOf(".");
                                var sourceExt;
                                if(lastDot >=0) {
                                    sourceExt = sourceName.substr(lastDot);
                                } else {
                                    sourceExt = new String("");
                                }
                                var target = new java.io.File(baseDir.concat(S).concat(buildDir).concat(S).concat("icon").concat(S).concat(deployBase).concat(sourceExt));
                                copyTask.setFile(source);
                                copyTask.setTofile(target);
                                copyTask.setFlatten(true);
                                copyTask.setFailOnError(false);
                                copyTask.perform();
                                var tempicon;
                                if(target.exists()) {
                                    try {
                                        tempicon = target.getCanonicalPath();
                                    } catch(err) {
                                        tempicon = dicon;
                                    }
                                } else {
                                    tempicon = dicon;
                                }
                                var nicon = info.createIcon();
                                nicon.setHref(tempicon);
                                print("Source native icon reference: " + dicon);
                                print("Processed native icon reference: " + tempicon);
                            } else {
                                print("Warning: Native Package icon not supported by this version of JavaFX SDK deployment Ant task. Please upgrade to JDK7u14.");
                            }
                        }
                    } else {
                        var icon = new String(project.getProperty("javafx.deploy.icon"));
                        if(defined(icon)) {
                            if(isTrue(fx_ant_api_1_1)) {
                                var iicon = info.createIcon();
                                iicon.setHref(icon);
                                print("Adding WebStart icon reference: " + icon);
                            } else {
                                print("Warning: WebStart Icon not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                            }
                        }
                    }
                    
                    // fx:permissions
                    var perm = deploy.createPermissions();
                    perm.setProject(project);
                    var elev = new String(project.getProperty("permissions.elevated"));
                    perm.setElevated(isTrue(elev));
                    
                    // fx:preferences
                    var pref = deploy.createPreferences();
                    pref.setProject(project);
                    var scut = new String(project.getProperty("javafx.deploy.adddesktopshortcut"));
                    var instp = new String(project.getProperty("javafx.deploy.installpermanently"));
                    var smenu = new String(project.getProperty("javafx.deploy.addstartmenushortcut"));
                    pref.setShortcut(isTrue(scut));
                    pref.setInstall(isTrue(instp));
                    pref.setMenu(isTrue(smenu));

                    // fx:template
                    var templ = new String(project.getProperty("javafx.run.htmltemplate"));
                    var templp = new String(project.getProperty("javafx.run.htmltemplate.processed"));
                    if(defined(templ) && defined(templp)) {
                        var temp = deploy.createTemplate();
                        temp.setProject(project);
                        temp.setFile(new java.io.File(templ));
                        temp.setTofile(new java.io.File(templp));
                    }

                    // fx:platform
                    var plat = deploy.createPlatform();
                    plat.setProject(project);
                    var requestRT = new String(project.getProperty("javafx.deploy.request.runtime"));
                    if(defined(requestRT)) {
                        plat.setJavafx(requestRT);
                    }
                    var jvmargs = new String(project.getProperty("run.jvmargs"));
                    if(defined(jvmargs)) {
                        var jvmargss = jvmargs.split(" ");
                        for(var i = 0; i < jvmargss.length; i++) {
                            if(defined(jvmargss[i])) {
                                var vmarg = plat.createJvmarg();
                                vmarg.setValue(jvmargss[i]);
                            }
                        }
                    }
                    if(isTrue(debug_in_browser)) {
                        var vmarg = plat.createJvmarg();
                        vmarg.setValue(new String("-ea:javafx.browserdebug"));
                    }
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        if(!isTrue(projStateRun) && !isTrue(projStateDbg) && !isTrue(projStatePrf)) {
                            if(plat.setBasedir) {
                                var sdkdir = new String(project.getProperty("javafx.sdk"));
                                if(defined(sdkdir)) {
                                    plat.setBasedir(sdkdir);
                                }
                            } else {
                                print("Note: the current version of native packager Ant task can bundle the default JRE only.");
                            }
                        }
                    }
                    
                    // fx:callbacks
                    var callbs = deploy.createCallbacks();
                    callbs.setProject(project);
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXCALLB)) {
                            var prop = new String(project.getProperty(pn));
                            if(defined(prop)) {
                                var cname = pn.substring(JFXCALLB.length+1);
                                var cb = callbs.createCallback();
                                cb.setProject(project);
                                cb.setName(cname);
                                cb.addText(prop);
                            }
                        }
                    }
                    
                    deploy.perform();
                ]]>
            </script>
            <antcall target="-post-jfx-deploy"/>
            <antcall target="-call-post-jfx-native"/>
        </sequential>
    </macrodef>

    <!-- JavaFX SDK 2.0.x and 2.1.x deploy task can not generate pre-FX jnlp which is needed for FX-in-Swing projects-->
    <macrodef name="deploy-deploy-swing">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <local name="permissions-elevated-token"/>
            <condition property="permissions-elevated-token" value="${line.separator}    &lt;security&gt;${line.separator}        &lt;all-permissions/&gt;${line.separator}    &lt;/security&gt;" else="">
                <isset property="permissions-elevated"/>
            </condition>
            <local name="offline-allowed-token"/>
            <condition property="offline-allowed-token" value="${line.separator}        &lt;offline-allowed/&gt;" else="">
                <isset property="offline-allowed"/>
            </condition>
            <local name="update-mode-background-token"/>
            <condition property="update-mode-background-token" value="background" else="always">
                <isset property="update-mode-background"/>
            </condition>
            <local name="html-template-processed-available"/>
            <condition property="html-template-processed-available">
                <and>
                    <isset property="javafx.run.htmltemplate.processed"/>
                    <not>
                        <equals arg1="${javafx.run.htmltemplate.processed}" arg2=""/>
                    </not>
                </and>
            </condition>
            <local name="javafx.deploy.icon.basename"/>
            <basename property="javafx.deploy.icon.basename" file="${javafx.deploy.icon}"/>
            <local name="local-icon-filename-available"/>
            <condition property="local-icon-filename-available">
                <and>
                    <isset property="icon-available"/>
                    <isset property="javafx.deploy.icon.basename"/>
                    <not><equals arg1="${javafx.deploy.icon.basename}" arg2=""/></not>
                    <not><contains string="${javafx.deploy.icon.basename}" substring="$${javafx" casesensitive="false"/></not>
                    <not><contains string="${javafx.deploy.icon}" substring="http:" casesensitive="false"/></not>
                </and>
            </condition>
            <local name="icon-token"/>
            <condition property="icon-token" value="${line.separator}        &lt;icon href=&quot;${javafx.deploy.icon.basename}&quot; kind=&quot;default&quot;/&gt;">
                <isset property="local-icon-filename-available"/>
            </condition>
            <condition property="icon-token" value="${line.separator}        &lt;icon href=&quot;${javafx.deploy.icon}&quot; kind=&quot;default&quot;/&gt;" else="">
                <isset property="icon-available"/>
            </condition>
            <basename property="dist.filename" file="${dist.jar}" suffix=".jar"/>
            <length file="${dist.jar}" property="dist.jar.size" />
            <local name="vmargs-token"/>
            <condition property="vmargs-token" value="java-vm-args=&quot;${run.jvmargs}&quot; " else="">
                <isset property="vmargs-available"/>
            </condition>
            <local name="applet-params-token"/>
            <local name="application-args-token"/>
            <echo message="JavaScript: deploy-deploy-swing 1" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    var JFXPAR = "javafx.param";
                    var JFXPARN = "name";
                    var JFXPARV = "value";

                    var params = new java.lang.StringBuilder();
                    var args = new java.lang.StringBuilder();
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    params.append("\n        <param name=\"");
                                    params.append(propn);
                                    params.append("\" value=\"");
                                    params.append(propv);
                                    params.append("\"/>");
                                    args.append("\n        <argument>");
                                    args.append(propn);
                                    args.append("=");
                                    args.append(propv);
                                    args.append("</argument>");
                                } else {
                                    params.append("\n        <param name=\"");
                                    params.append(propn);
                                    params.append("\" value=\"\"/>");
                                    args.append("\n        <argument>");
                                    args.append(propn);
                                    args.append("</argument>");
                                }
                            }
                        }
                    }
                    project.setProperty("applet-params-token", new String(params.toString()));
                    project.setProperty("application-args-token", new String(args.toString()));
                ]]>
            </script>
            <local name="application.desc.processed"/>
            <condition property="application.desc.processed" value="${application.desc}" else="Swing applet embedding JavaFX components.">
                <isset property="application.desc"/>
            </condition>
            <filterchain id="jnlp.template.filter">
                <replacetokens>
                    <token key="NAME" value="${dist.filename}"/>
                    <token key="MAINCLASS" value="${main.class}"/>
                    <token key="FILESIZE" value="${dist.jar.size}"/>
                    <token key="VENDOR" value="${application.vendor}"/>
                    <token key="TITLE" value="${application.title}"/>
                    <token key="DESCRIPTION" value="${application.desc.processed}"/>
                    <token key="WIDTH" value="${javafx.run.width}"/>
                    <token key="HEIGHT" value="${javafx.run.height}"/>
                    <token key="PERMISSIONS" value="${permissions-elevated-token}"/>
                    <token key="OFFLINE" value="${offline-allowed-token}"/>
                    <token key="UPDATEMODE" value="${update-mode-background-token}"/>
                    <token key="ICON" value="${icon-token}"/>
                    <token key="VMARGS" value="${vmargs-token}"/>
                    <token key="PARAMETERS" value="${applet-params-token}"/>
                    <token key="ARGUMENTS" value="${application-args-token}"/>
                </replacetokens>
            </filterchain>
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplateApplication.jnlp" 
                    tofile="${dist.dir}${file.separator}${dist.filename}_application.jnlp" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>        
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplateApplet.jnlp" 
                    tofile="${dist.dir}${file.separator}${dist.filename}_applet.jnlp" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>        
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplate.html" 
                    tofile="${dist.dir}${file.separator}${dist.filename}.html" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>
            <echo message="JavaScript: deploy-deploy-swing 2" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    var PREF = "file:";
                    var doCopyIcon = new String(project.getProperty("local-icon-filename-available"));
                    if(defined(doCopyIcon)) {
                        var iconProp = new String(project.getProperty("javafx.deploy.icon"));
                        if(startsWith(iconProp, PREF)) {
                            iconProp = iconProp.slice(PREF.length);
                        }
                        while(iconProp.charAt(0) == "/") {
                            iconProp = iconProp.slice(1);
                        }
                        var S = java.io.File.separator;
                        var baseDir = new String(project.getProperty("basedir"));
                        var distDir = new String(project.getProperty("dist.dir"));
                        var copyTask = new String(project.createTask("copy"));
                        var source = new java.io.File(iconProp);
                        var target = new java.io.File(baseDir.concat(S).concat(distDir));
                        copyTask.setFile(source);
                        copyTask.setTodir(target);
                        copyTask.setFlatten(true);
                        copyTask.setFailOnError(false);
                        copyTask.perform();
                    }
                    var doCopyHTMLFrom = new String(project.getProperty("html-template-available"));
                    var doCopyHTMLTo = new String(project.getProperty("html-template-processed-available"));
                    if(defined(doCopyHTMLFrom) && defined(doCopyHTMLTo)) {
                        var htmlFrom = new String(project.getProperty("javafx.run.htmltemplate"));
                        if(startsWith(htmlFrom, PREF)) {
                            htmlFrom = htmlFrom.slice(PREF.length);
                        }
                        while(startsWith(htmlFrom, "/")) {
                            htmlFrom = htmlFrom.slice(1);
                        }
                        var htmlTo = new String(project.getProperty("javafx.run.htmltemplate.processed"));
                        if(startsWith(htmlTo, PREF)) {
                            htmlTo = htmlTo.slice(PREF.length);
                        }
                        while(startsWith(htmlTo, "/")) {
                            htmlTo = htmlTo.slice(1);
                        }
                        var copyTask = project.createTask("copy");
                        var source = new java.io.File(htmlFrom);
                        var target = new java.io.File(htmlTo);
                        copyTask.setFile(source);
                        copyTask.setTofile(target);
                        copyTask.setFailOnError(false);
                        copyTask.perform();
                    }
                ]]>
            </script>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>


    <!-- Fallback Project Deployment Macros To Support At Least Partially JDKs Without JavaScript Support -->
    
    <macrodef name="fallback-deploy-application-def">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${javafx.main.class}"
                fallbackClass="${javafx.fallback.class}">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-application-def-preloader">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${javafx.main.class}"
                preloaderClass="${javafx.preloader.class}"
                fallbackClass="${javafx.fallback.class}">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-application-def-swing">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${main.class}"
                fallbackClass="${javafx.fallback.class}"
                toolkit="swing">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-resources">
        <sequential>
            <fx:resources id="appRes">
                <fx:fileset requiredFor="startup" dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${jfx.deployment.jar}"/>
                </fx:fileset>
            </fx:resources>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-resources-preloader">
        <sequential>
            <fx:resources id="appRes">
                <fx:fileset requiredFor="preloader" dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fx:fileset>
                <fx:fileset requiredFor="startup" dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                    <exclude name="lib${file.separator}${jfx.deployment.jar}"/>
                </fx:fileset>
            </fx:resources>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-jar">
        <sequential>
            <antcall target="-pre-jfx-jar"/>
            <fx:jar destfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fileset dir="${build.classes.dir}">
                    <exclude name="**${file.separator}*.${css-exclude-ext}"/>
                </fileset>
                <manifest>
                    <attribute name="Implementation-Vendor" value="${application.vendor}"/>
                    <attribute name="Implementation-Title" value="${application.title}"/>
                    <attribute name="Implementation-Version" value="1.0"/>
                </manifest>
            </fx:jar>
            <antcall target="-post-jfx-jar"/>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-deploy">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <echo message="Warning: JVM Arguments and Callbacks (if any) not passed to &lt;fx:deploy&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:deploy width="${javafx.width}" height="${javafx.height}"
                      outdir="${jfx.deployment.dir}" embedjnlp="true" updatemode="${update-mode}"
                      outfile="${application.title}" includeDT="${javafx.deploy.includeDT}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fx:info title="${application.title}" vendor="${application.vendor}"/>
                <fx:permissions elevated="${permissions.elevated}"/>
                <fx:preferences shortcut="${javafx.deploy.adddesktopshortcut}" install="${javafx.deploy.installpermanently}" menu="${javafx.deploy.addstartmenushortcut}"/>
                <!-- PLATFORM NOT PASSED IN FALLBACK -->
                <!-- CALLBACKS NOT PASSED IN FALLBACK -->
            </fx:deploy>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-deploy-template">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <echo message="Warning: JVM Arguments and Callbacks (if any) not passed to &lt;fx:deploy&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <deploy-process-template/>
            <fx:deploy width="${javafx.width}" height="${javafx.height}"
                      outdir="${jfx.deployment.dir}" embedjnlp="true" updatemode="${update-mode}"
                      outfile="${application.title}" includeDT="${javafx.deploy.includeDT}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fx:info title="${application.title}" vendor="${application.vendor}"/>
                <fx:permissions elevated="${permissions.elevated}"/>
                <fx:preferences shortcut="${javafx.deploy.adddesktopshortcut}" install="${javafx.deploy.installpermanently}" menu="${javafx.deploy.addstartmenushortcut}"/>
                <fx:template file="${javafx.run.htmltemplate}" tofile="${javafx.run.htmltemplate.processed}"/>
                <!-- PLATFORM NOT PASSED IN FALLBACK -->
                <!-- CALLBACKS NOT PASSED IN FALLBACK -->
            </fx:deploy>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>


    <!-- Project Deployment Targets -->

    <target name="-check-sign" depends="-check-project,-javafx-init-keystore" if="javafx.signed.true+signjars.task.available">
        <condition property="sign-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <isset property="fx-in-swing-app-workaround"/>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <isset property="fx-in-swing-app-workaround"/>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <isset property="fx-in-swing-app-workaround"/>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <isset property="fx-in-swing-app-workaround"/>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
    </target>
    <target name="-check-nosign" depends="-check-project">
        <condition property="nosign-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="fx-in-swing-app-workaround"/>
            </and>
        </condition>
        <condition property="nosign-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="fx-in-swing-app-workaround"/>
            </and>
        </condition>
    </target>


    <!-- WITH SIGNING -->

    <!-- project without preloader -->
    <!-- no html template -->
    <target name="-deploy-app-sign-nopreloader-notemplate" depends="-check-sign" if="sign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-notemplate" depends="-check-sign" if="sign-blob-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- no html template -->
    <target name="-deploy-app-sign-preloader-notemplate" depends="-check-sign" if="sign-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-preloader/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-preloader-notemplate" depends="-check-sign" if="sign-blob-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob-preloader/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <target name="-deploy-app-sign-nopreloader-template" depends="-check-sign" if="sign-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-template" depends="-check-sign" if="sign-blob-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- html template -->
    <target name="-deploy-app-sign-preloader-template" depends="-check-sign" if="sign-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-preloader/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-preloader-template" depends="-check-sign" if="sign-blob-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob-preloader/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- no html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-sign-nopreloader-notemplate-swing" depends="-check-sign" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-deploy-swing/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-notemplate-swing" depends="-check-sign" if="sign-blob-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-blob-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-deploy-swing/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-sign-nopreloader-template-swing" depends="-check-sign" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-template-swing" depends="-check-sign" if="sign-blob-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-blob-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>


    <!-- NO SIGNING -->

    <!-- project without preloader -->
    <!-- no html template -->
    <target name="-deploy-app-nosign-nopreloader-notemplate" depends="-check-nosign" if="nosign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-nosign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- no html template -->
    <target name="-deploy-app-nosign-preloader-notemplate" depends="-check-nosign" if="nosign-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-nosign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <target name="-deploy-app-nosign-nopreloader-template" depends="-check-nosign" if="nosign-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-nosign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- html template -->
    <target name="-deploy-app-nosign-preloader-template" depends="-check-nosign" if="nosign-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-nosign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- no html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-nosign-nopreloader-notemplate-swing" depends="-check-nosign" if="nosign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-nosign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy-swing/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-nosign-nopreloader-template-swing" depends="-check-nosign" if="nosign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-nosign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>


    <!-- FALLBACK (NO JAVASCRIPT) TARGETS WITH SIGNING -->

    <target name="-check-fallback-sign-deploy-swing-possible" depends="-check-sign">
        <local name="fail-deploy-swing-possible"/>
        <condition property="fail-deploy-swing-possible">
            <and>
                <or>
                    <isset property="sign-nopreloader-notemplate-swing"/>
                    <isset property="sign-nopreloader-template-swing"/>
                </or>
                <not><isset property="have-fx-ant-api-1.2"/></not>
            </and>
        </condition>
        <fail message="Error: JavaFX SDK version 2.2 or newer is needed to deploy FX-in-Swing on JDK without JavaScript support." 
              if="fail-deploy-swing-possible"/>
    </target>
    
    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-sign-nopreloader-notemplate" depends="-check-sign" if="sign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-notemplate" depends="-check-sign" if="sign-blob-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-sign-preloader-notemplate" depends="-check-sign" if="sign-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-preloader/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-preloader-notemplate" depends="-check-sign" if="sign-blob-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-blob-preloader/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-sign-nopreloader-template" depends="-check-sign" if="sign-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-template" depends="-check-sign" if="sign-blob-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-sign-preloader-template" depends="-check-sign" if="sign-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-preloader/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-preloader-template" depends="-check-sign" if="sign-blob-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-blob-preloader/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-sign-nopreloader-notemplate-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-notemplate-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-sign-nopreloader-template-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-template-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy-template/>
    </target>


    <!-- FALLBACK (NO JAVASCRIPT) TARGETS NO SIGNING -->

    <target name="-check-fallback-nosign-deploy-swing-possible" depends="-check-nosign">
        <local name="fail-deploy-swing-possible"/>
        <condition property="fail-deploy-swing-possible">
            <and>
                <or>
                    <isset property="nosign-nopreloader-notemplate-swing"/>
                    <isset property="nosign-nopreloader-template-swing"/>
                </or>
                <not><isset property="have-fx-ant-api-1.2"/></not>
            </and>
        </condition>
        <fail message="Error: JavaFX SDK version 2.2 or newer is needed to deploy FX-in-Swing on JDK without JavaScript support." 
              if="fail-deploy-swing-possible"/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-nosign-nopreloader-notemplate" depends="-check-nosign" if="nosign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-nosign-preloader-notemplate" depends="-check-nosign" if="nosign-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-nosign-nopreloader-template" depends="-check-nosign" if="nosign-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-nosign-preloader-template" depends="-check-nosign" if="nosign-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-nosign-nopreloader-notemplate-swing" depends="-check-fallback-nosign-deploy-swing-possible" if="nosign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-nosign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-nosign-nopreloader-template-swing" depends="-check-fallback-nosign-deploy-swing-possible" if="nosign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-nosign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>


    <!-- Project Build Targets -->

    <target name="jfx-build" depends="-jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    <target name="jfx-build-noscript" depends="-set-fallback-no-javascript, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    
    <target name="jfx-rebuild" depends="clean, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    <target name="jfx-rebuild-noscript" depends="-set-fallback-no-javascript, clean, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>

    <target name="jfx-build-native" depends="-set-do-build-native-package, -check-ant-jre-supports-native-packaging, -check-native-packager-external-tools, jfx-rebuild"/>
    <target name="jfx-build-native-noscript" depends="-set-do-build-native-package, -check-ant-jre-supports-native-packaging, -check-native-packager-external-tools, jfx-rebuild-noscript"/>

    <target name="build-native">
        <property name="javafx.native.bundling.type" value="${native.bundling.type}"/>
        <antcall target="jfx-build-native"/>
    </target>
    <target name="build-native-noscript">
        <property name="javafx.native.bundling.type" value="${native.bundling.type}"/>        
        <antcall target="jfx-build-native-noscript"/>
    </target>
    
    <target name="-check-do-jar">
        <condition property="do-jar-false">
            <and>
                <isset property="do.jar"/>
                <equals arg1="${do.jar}" arg2="false"/>
            </and>
        </condition>
    </target>
    <target name="-set-fallback-no-javascript">
        <property name="fallback.no.javascript" value="true"/>
        <echo message="Warning: Using fallback build infrastructure due to default JDK missing JavaScript support."/>
    </target>
    <target name="-jfx-do-compile" depends="-check-do-jar" if="do-jar-false">
        <antcall target="compile"/>
    </target>
    <target name="-jfx-do-jar" depends="-check-do-jar" unless="do-jar-false">
        <antcall target="jar"/>
    </target>
    <target name="-jfx-do-post-jar" depends="-init-check,-check-project" if="preloader-app">
        <!-- Preloaders are created using SE copylibs task that creates readme file relevant for SE only -->
        <delete file="${basedir}${file.separator}${dist.dir}${file.separator}README.TXT"/>
    </target>
    
    <target name="-set-do-build-native-package">
        <property name="do.build.native.package" value="true"/>
        <echo message="do.build.native.package = ${do.build.native.package}" level="verbose"/>
    </target>
    <target name="-check-ant-jre-supports-native-packaging" depends="-check-ant-jre-version">
        <fail message="Error:${line.separator}JavaFX native packager requires NetBeans to run on JDK 1.7u6 or later !" if="have-ant-jre-pre7u6"/>
    </target>
    
    <target name="-call-pre-jfx-native" if="do.build.native.package">
        <antcall target="-pre-jfx-native"/>
    </target>
    <target name="-call-post-jfx-native" if="do.build.native.package">
        <antcall target="-post-jfx-native"/>
    </target>

    <target name="-check-native-bundling-type" depends="-check-operating-system" if="do.build.native.package">
        <condition property="need.Inno.presence">
            <and>
                <isset property="running.on.windows"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="all" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="installer" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="exe" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.WiX.presence">
            <and>
                <isset property="running.on.windows"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="all" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="installer" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="msi" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.dpkg.presence">
            <and>
                <isset property="running.on.unix"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="deb" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.rpmbuild.presence">
            <and>
                <isset property="running.on.unix"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="rpm" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <echo message="need.Inno.presence:${need.Inno.presence}" level="verbose"/>
        <echo message="need.WiX.presence:${need.WiX.presence}" level="verbose"/>
        <echo message="need.dpkg.presence:${need.dpkg.presence}" level="verbose"/>
        <echo message="need.rpmbuild.presence:${need.rpmbuild.presence}" level="verbose"/>
    </target>
    <target name="-check-Inno-presence" depends="-check-native-bundling-type" if="need.Inno.presence">
        <local name="exec-output"/>
        <local name="exec-error"/>
        <local name="exec-result"/>
        <exec executable="iscc" outputproperty="exec-output" failifexecutionfails="false" errorproperty="exec-error" resultproperty="exec-result"/>
        <echo message="exec-output:${exec-output}" level="verbose"/>
        <echo message="exec-error:${exec-error}" level="verbose"/>
        <echo message="exec-result:${exec-result}" level="verbose"/>
        <condition property="missing.Inno">
            <not><and>
                <contains string="${exec-output}" substring="Inno Setup"/>
                <not><contains string="${exec-output}" substring="Inno Setup 1"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 2"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 3"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 4"/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-WiX-presence" depends="-check-native-bundling-type" if="need.WiX.presence">
        <local name="exec-output"/>
        <local name="exec-error"/>
        <local name="exec-result"/>
        <exec executable="candle" outputproperty="exec-output" failifexecutionfails="false" errorproperty="exec-error" resultproperty="exec-result">
            <arg value="-?"/>
        </exec>
        <echo message="exec-output:${exec-output}" level="verbose"/>
        <echo message="exec-error:${exec-error}" level="verbose"/>
        <echo message="exec-result:${exec-result}" level="verbose"/>
        <condition property="missing.WiX">
            <not>
                <matches string="${exec-output}" pattern="windows\s+installer\s+xml\s+(toolset\s+)?compiler\s+version\s+3.*" casesensitive="false"/>
            </not>
        </condition>
    </target>
    <target name="-check-dpkg-presence" depends="-check-native-bundling-type" if="need.dpkg.presence">
        <local name="exec.which.dpkg.result"/>
        <local name="exec.which.dpkg.output"/>
        <exec executable="command" failifexecutionfails="false" failonerror="false" resultproperty="exec.which.dpkg.result" outputproperty="exec.which.dpkg.output">
            <arg line="-v dpkg"/>
        </exec>
        <condition property="missing.dpkg">
            <not><and>
                <isset property="exec.which.dpkg.result"/>
                <equals arg1="${exec.which.dpkg.result}" arg2="0"/>
                <isset property="exec.which.dpkg.output"/>
                <not><equals arg1="${exec.which.dpkg.output}" arg2=""/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-rpmbuild-presence" depends="-check-native-bundling-type" if="need.rpmbuild.presence">
        <local name="exec.which.rpmbuild.result"/>
        <local name="exec.which.rpmbuild.output"/>
        <exec executable="command" failifexecutionfails="false" failonerror="false" resultproperty="exec.which.rpmbuild.result" outputproperty="exec.which.rpmbuild.output">
            <arg line="-v rpmbuild"/>
        </exec>
        <condition property="missing.rpmbuild">
            <not><and>
                <isset property="exec.which.rpmbuild.result"/>
                <equals arg1="${exec.which.rpmbuild.result}" arg2="0"/>
                <isset property="exec.which.rpmbuild.output"/>
                <not><equals arg1="${exec.which.rpmbuild.output}" arg2=""/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-native-packager-external-tools" depends="-check-Inno-presence, -check-WiX-presence, -check-dpkg-presence, -check-rpmbuild-presence">
        <property name="missing.Inno.message" value="JavaFX native packager requires external Inno Setup 5+ tools installed and included on PATH to create EXE installer. See http://www.jrsoftware.org/"/>
        <property name="missing.WiX.message" value="JavaFX native packager requires external WiX 3.0+ tools installed and included on PATH to create MSI installer. See http://wix.sourceforge.net/"/>
        <property name="missing.dpkg.message" value="JavaFX native packager requires Debian Packager tools to create DEB package, but dpkg could not be found."/>
        <property name="missing.rpmbuild.message" value="JavaFX native packager requires RPMBuild to create RPM package, but rpmbuild could not be found."/>
        <condition property="missing.Inno.WiX">
            <and>
                <isset property="missing.Inno"/>
                <isset property="missing.WiX"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}${missing.Inno.message}${line.separator}${missing.WiX.message}" if="missing.Inno.WiX"/>
        <fail message="Error:${line.separator}${missing.Inno.message}" if="missing.Inno"/>
        <fail message="Error:${line.separator}${missing.WiX.message}" if="missing.WiX"/>
        <fail message="Error:${line.separator}${missing.dpkg.message}" if="missing.dpkg"/>
        <fail message="Error:${line.separator}${missing.rpmbuild.message}" if="missing.rpmbuild"/>
    </target>

    <!-- Project Run Support -->

    <target name="-warn-of-preloader" depends="-check-project" if="preloader-app-no-workaround">
        <fail message="Error:${line.separator}JavaFX 2 Preloader Project can not be executed directly.${line.separator}Please execute instead a JavaFX Application that uses the Preloader."/>
    </target>
    
    <target name="-mark-project-state-running">
        <property name="project.state.running" value="true"/>
        <echo message="project.state.running = ${project.state.running}" level="verbose"/>
    </target>
    <target name="-mark-project-state-debugging">
        <property name="project.state.debugging" value="true"/>
        <echo message="project.state.debugging = ${project.state.debugging}" level="verbose"/>
    </target>
    <target name="-mark-project-state-debugging-in-browser" depends="-mark-project-state-debugging">
        <property name="project.state.debugging.in.browser" value="true"/>
        <echo message="project.state.debugging.in.browser = ${project.state.debugging.in.browser}" level="verbose"/>
    </target>
    <target name="-mark-project-state-profiling">
        <property name="project.state.profiling" value="true"/>
        <echo message="project.state.profiling = ${project.state.profiling}" level="verbose"/>
    </target>
    <target name="-mark-project-needs-jnlp">
        <property name="project.needs.jnlp" value="true"/>
        <echo message="project.needs.jnlp = ${project.needs.jnlp}" level="verbose"/>
    </target>
    
    <!-- set property javafx.disable.concurrent.runs=true to disable runs from temporary directory -->
    <target name="-check-concurrent-runs">
        <condition property="disable-concurrent-runs">
            <and>
                <isset property="javafx.disable.concurrent.runs"/>
                <equals arg1="${javafx.disable.concurrent.runs}" arg2="true" trim="true"/>
            </and>
        </condition>
        <condition property="temp.run.jar" value="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}">
            <isset property="disable-concurrent-runs"/>
        </condition>
        <condition property="temp.run.jnlp" value="${jfx.deployment.jnlp}">
            <isset property="disable-concurrent-runs"/>
        </condition>
        <condition property="temp.run.html" value="${jfx.deployment.html}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-create-temp-run-dir" depends="-check-concurrent-runs" unless="disable-concurrent-runs">
        <echo message="Creating temp run dir" level="verbose"/>
        <tempfile property="temp.run.dir" destDir="${basedir}${file.separator}${dist.dir}${file.separator}" prefix="run"/>
        <echo message="temp.run.dir = ${temp.run.dir}" level="verbose"/>
        <copy todir="${temp.run.dir}" includeemptydirs="true" overwrite="true">
            <fileset dir="${basedir}${file.separator}${dist.dir}">
                <exclude name="**${file.separator}bundles${file.separator}**"/>
                <exclude name="**${file.separator}run*${file.separator}**"/>
            </fileset>
        </copy>        
        <property name="temp.run.jar" value="${temp.run.dir}${file.separator}${jfx.deployment.jar}"/>
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="temp.run.jnlp" value="${temp.run.dir}${file.separator}${jfx.deployment.base}.jnlp"/>
        <property name="temp.run.html" value="${temp.run.dir}${file.separator}${jfx.deployment.base}.html"/>
    </target>
    <target name="-remove-temp-run-dir" if="temp.run.dir">
        <echo message="Removing temp run dir" level="verbose"/>
        <delete dir="${temp.run.dir}" quiet="true" failonerror="false"/>
    </target>
    <target depends="init,compile,jar,-create-temp-run-dir" description="Run JavaFX project standalone." name="jfx-project-run">
        <echo message="Executing ${temp.run.jar} using platform ${platform.java}"/>
        <property name="run.jvmargs" value=""/>
        <property name="run.jvmargs.ide" value=""/>        
        <java jar="${temp.run.jar}" dir="${work.dir}" fork="true" jvm="${platform.java}">
            <jvmarg line="${endorsed.classpath.cmd.line.arg}"/>
            <jvmarg value="-Dfile.encoding=${runtime.encoding}"/>
            <redirector errorencoding="${runtime.encoding}" inputencoding="${runtime.encoding}" outputencoding="${runtime.encoding}"/>
            <jvmarg line="${run.jvmargs}"/>
            <jvmarg line="${run.jvmargs.ide}"/>
            <classpath>
                <path path="${temp.run.jar}:${javac.classpath}"/>
            </classpath>
            <arg line="${application.args}"/>
            <syspropertyset>
                <propertyref prefix="run-sys-prop."/>
                <mapper from="run-sys-prop.*" to="*" type="glob"/>
            </syspropertyset>
        </java>
        <antcall target="-remove-temp-run-dir"/>
    </target>
    <target depends="init,compile,jar,-create-temp-run-dir,-debug-start-debugger" description="Debug JavaFX project standalone." name="jfx-project-debug">
        <echo message="Executing ${temp.run.jar} using platform ${platform.java}"/>
        <property name="run.jvmargs" value=""/>
        <property name="run.jvmargs.ide" value=""/>        
        <java jar="${temp.run.jar}" dir="${work.dir}" fork="true" jvm="${platform.java}">
            <jvmarg line="${endorsed.classpath.cmd.line.arg}"/>
            <jvmarg line="${debug-args-line}"/>
            <jvmarg value="-Xrunjdwp:transport=${debug-transport},address=${jpda.address}"/>
            <jvmarg value="-Dfile.encoding=${runtime.encoding}"/>
            <redirector errorencoding="${runtime.encoding}" inputencoding="${runtime.encoding}" outputencoding="${runtime.encoding}"/>
            <jvmarg line="${run.jvmargs}"/>
            <jvmarg line="${run.jvmargs.ide}"/>
            <classpath>
                <path path="${temp.run.jar}:${javac.classpath}"/>
            </classpath>
            <arg line="${application.args}"/>
            <syspropertyset>
                <propertyref prefix="run-sys-prop."/>
                <mapper from="run-sys-prop.*" to="*" type="glob"/>
            </syspropertyset>
        </java>
        <antcall target="-remove-temp-run-dir"/>
    </target>


    <!-- Running/Debugging/Profiling Standalone -->

    <target name="jfxsa-run" depends="-mark-project-state-running,-clean-if-config-changed,-check-jfx-runtime,-warn-of-preloader,jfx-project-run"/>
    <target name="jfxsa-run-noscript" depends="-set-fallback-no-javascript, jfxsa-run"/>

    <target name="jfxsa-debug" depends="-mark-project-state-debugging,-clean-if-config-changed,jar,-check-jfx-runtime,-warn-of-preloader,jfx-project-debug"/>
    <target name="jfxsa-debug-noscript" depends="-set-fallback-no-javascript, jfxsa-debug"/>
    
    <target name="jfxsa-profile" depends="-mark-project-state-profiling,-check-jfx-runtime,-warn-of-preloader,jfx-project-profile"/>
    <target name="jfxsa-profile-noscript" depends="-set-fallback-no-javascript, jfxsa-profile"/>

    <target name="-check-clean-if-config-changed" depends="-init-project">
        <deploy-defines/>
        <uptodate property="jfx.deployment.jar.newer.than.nbproject" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
        <echo message="jfx.deployment.jar.newer.than.nbproject = ${jfx.deployment.jar.newer.than.nbproject}" level="verbose"/>
        <available file="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" type="file" property="jfx.deployment.jar.exists"/>
        <condition property="request.clean.due.to.config.change">
            <and>
                <isset property="jfx.deployment.jar.exists"/>
                <not><isset property="jfx.deployment.jar.newer.than.nbproject"/></not>
            </and>
        </condition>
    </target>
    <target name="-clean-if-config-changed" depends="-check-clean-if-config-changed" if="request.clean.due.to.config.change">
        <echo message="Config change detected. Invoking clean." level="verbose"/>
        <antcall target="clean"/>
    </target>
    
    <target depends="-profile-check-1,-profile-pre72" description="Profile a project in the IDE." if="profiler.configured" name="jfx-project-profile" unless="profiler.info.jvmargs.agent">
        <startprofiler/>
        <antcall target="jfxsa-run"/>
    </target>

    <!-- Shared Debugging init -->

    <target name="-init-debug-args">
        <property name="version-output" value="java version &quot;${ant.java.version}"/>
        <condition property="have-jdk-older-than-1.4">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
            </or>
        </condition>
        <condition else="-Xdebug" property="debug-args-line" value="-Xdebug -Xnoagent -Djava.compiler=none">
            <istrue value="${have-jdk-older-than-1.4}"/>
        </condition>
        <condition else="dt_socket" property="debug-transport-by-os" value="dt_shmem">
            <os family="windows"/>
        </condition>
        <condition else="${debug-transport-by-os}" property="debug-transport" value="${debug.transport}">
            <isset property="debug.transport"/>
        </condition>
    </target>


    <!-- Running/Debugging/Profiling as WebStart -->

    <target name="-check-jnlp-file-fx" depends="-swing-api-check" unless="fx-in-swing-app-workaround">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.jnlp" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}.jnlp"/>
    </target>
    <target name="-check-jnlp-file-swing" depends="-swing-api-check" if="fx-in-swing-app-workaround">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.jnlp" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}_application.jnlp"/>
    </target>
    <target name="-check-jnlp-file" depends="-check-jnlp-file-fx,-check-jnlp-file-swing">
        <condition property="jnlp-file-exists">
            <available file="${jfx.deployment.jnlp}"/>
        </condition>
        <condition property="jnlp-file-exists+netbeans.home">
            <and>
                <isset property="jnlp-file-exists"/>
                <isset property="netbeans.home"/>
            </and>
        </condition>
    </target>

    <target name="-resolve-jnlp-file" depends="-check-jnlp-file" unless="jnlp-file-exists">
        <antcall target="jfx-deployment"/>
        <antcall target="-check-jnlp-file"/>
    </target>

    <!-- set property javafx.enable.concurrent.external.runs=true to enable multiple runs of the same WebStart or Run-in-Browser project -->
    <target name="-check-concurrent-jnlp-runs" depends="-resolve-jnlp-file">
        <condition property="disable-concurrent-runs">
            <not>
                <and>
                    <isset property="javafx.enable.concurrent.external.runs"/>
                    <equals arg1="${javafx.enable.concurrent.external.runs}" arg2="true" trim="true"/>
                </and>
            </not>
        </condition>
        <condition property="temp.run.jnlp" value="${jfx.deployment.jnlp}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-warn-concurrent-jnlp-runs" unless="disable-concurrent-runs">
        <echo message="Note: Concurrent Run as WebStart enabled.${line.separator}Temporary directory ${temp.run.dir}${line.separator}will remain unused when WebStart execution has finished. Use project Clean to delete unused directories."/>
    </target>

    <target name="jfxws-run" if="jnlp-file-exists" depends="-mark-project-state-running,-clean-if-config-changed,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-check-concurrent-jnlp-runs,-create-temp-run-dir,-warn-insufficient-signing" 
            description="Start JavaFX javaws execution">
        <echo message="Executing ${temp.run.jnlp} using ${active.webstart.executable}"/>
        <exec executable="${active.webstart.executable}">
            <arg file="${temp.run.jnlp}"/>
        </exec>
        <antcall target="-warn-concurrent-jnlp-runs"/>
    </target>
    
    <target name="jfxws-debug" if="jnlp-file-exists+netbeans.home" depends="-mark-project-state-debugging,-clean-if-config-changed,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-warn-insufficient-signing,
            -debug-start-debugger,-debug-javaws-debuggee" description="Debug JavaFX javaws project in IDE"/>
        
    <target name="-debug-javaws-debuggee" depends="-init-debug-args">
        <echo message="Executing ${jfx.deployment.jnlp} in debug mode using ${active.webstart.executable}"/>
        <exec executable="${active.webstart.executable}">
            <env key="JAVAWS_VM_ARGS" value="${debug-args-line} -Xrunjdwp:transport=${debug-transport},address=${jpda.address}"/>
            <arg value="-wait"/>
            <arg file="${jfx.deployment.jnlp}"/>
        </exec>
    </target>
    
    <target name="-profile-check-1">
        <property name="run.jvmargs.ide" value=""/>        
        <condition property="profiler.configured">
            <or>
                <contains casesensitive="true" string="${run.jvmargs.ide}" substring="-agentpath:"/>
                <contains casesensitive="true" string="${run.jvmargs.ide}" substring="-javaagent:"/>
            </or>
        </condition>
    </target>
    
    <target if="jnlp-file-exists+netbeans.home" name="-profile-check-jnlp">
        <antcall target="-profile-check-1"/>
    </target>
    
    <target name="-do-jfxws-profile" depends="-mark-project-state-profiling,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-warn-insufficient-signing">
        <echo message="Executing ${jfx.deployment.jnlp} in profile mode using ${active.webstart.executable}"/>
        <property name="run.jvmargs.ide" value=""/>        
        <exec executable="${active.webstart.executable}">
            <env key="JAVAWS_VM_ARGS" value="${run.jvmargs.ide}"/>
            <arg value="-wait"/>
            <arg file="${jfx.deployment.jnlp}"/>
        </exec>
    </target>
    
    <target name="jfxws-profile" if="profiler.configured" 
        depends="-profile-check-1"
        description="Profile JavaFX javaws project in IDE">
        <startprofiler/>
        <antcall target="-do-jfxws-profile"/>
    </target>
    
    <target name="jfxws-run-noscript" depends="-set-fallback-no-javascript, jfxws-run"/>

    <target name="jfxws-debug-noscript" depends="-set-fallback-no-javascript, jfxws-debug"/>

    <target name="jfxws-profile-noscript" depends="-set-fallback-no-javascript, jfxws-profile"/>


    <!-- Running/Debugging/Profiling in Browser -->

    <target name="-check-selected-browser-path" depends="-check-default-run-config">
        <condition property="javafx.run.inbrowser.undefined">
            <or>
                <and>
                    <isset property="javafx.run.inbrowser"/>
                    <equals arg1="${javafx.run.inbrowser}" arg2="undefined"/>
                </and>
                <and>
                    <isset property="javafx.run.inbrowser.path"/>
                    <equals arg1="${javafx.run.inbrowser.path}" arg2="undefined"/>
                </and>
            </or>
        </condition>
        <condition property="javafx.run.inbrowser.path-exists">
            <and>
                <isset property="javafx.run.inbrowser.path"/>
                <available file="${javafx.run.inbrowser.path}"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}Browser selection not recognizable from ${config} run configuration.${line.separator}Please go to Project Properties dialog, category Run, to select a valid browser." unless="javafx.run.inbrowser.path"/>
        <fail message="Error:${line.separator}No browser defined in ${config} run configuration.${line.separator}Please verify in Tools->Options dialog that NetBeans recognizes a valid browser, then go to Project Properties dialog, category Run, to select a valid browser." if="javafx.run.inbrowser.undefined"/>
        <fail message="Error:${line.separator}Browser ${javafx.run.inbrowser.path} referred from ${config} run configuration can not be found.${line.separator}(This can happen, e.g, when the JavaFX Project is transferred to another system.)${line.separator}Please go to Project Properties dialog, category Run, to select a valid browser." unless="javafx.run.inbrowser.path-exists"/>
    </target>

    <target name="-substitute-template-processed-html-file" depends="-check-project" if="html-template-available">
        <deploy-process-template/>
    </target>
    <target name="-check-template-processed-html-file" depends="-substitute-template-processed-html-file">
        <condition property="html-file-exists">
            <and>
                <isset property="html-template-available"/>
                <available file="${javafx.run.htmltemplate.processed}"/>
            </and>
        </condition>
    </target>
    
    <target name="-set-template-processed-html-file" depends="-check-template-processed-html-file" if="html-file-exists">
        <property name="jfx.deployment.html" location="${javafx.run.htmltemplate.processed}"/>
    </target>
    
    <target name="-set-html-file" depends="-set-template-processed-html-file" unless="html-file-exists">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.html" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}.html"/>
        <condition property="html-file-exists">
            <available file="${jfx.deployment.html}"/>
        </condition>
        <condition property="html-file-exists+netbeans.home">
            <and>
                <isset property="html-file-exists"/>
                <isset property="netbeans.home"/>
            </and>
        </condition>
    </target>

    <!-- set property javafx.enable.concurrent.external.runs=true to enable multiple runs of the same WebStart or Run-in-Browser project -->
    <target name="-check-concurrent-html-runs" depends="-set-html-file">
        <condition property="disable-concurrent-runs">
            <or>
                <not>
                    <and>
                        <isset property="javafx.enable.concurrent.external.runs"/>
                        <equals arg1="${javafx.enable.concurrent.external.runs}" arg2="true" trim="true"/>
                    </and>
                </not>
                <and>
                    <isset property="html-template-available"/>
                    <available file="${javafx.run.htmltemplate.processed}"/>
                </and>
            </or>
        </condition>
        <condition property="temp.run.html" value="${jfx.deployment.html}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-warn-concurrent-html-runs" unless="disable-concurrent-runs">
        <echo message="Note: Concurrent Run in Browser enabled.${line.separator}Temporary directory ${temp.run.dir}${line.separator}will remain unused when execution in browser has finished. Use project Clean to delete unused directories."/>
    </target>

    <target name="jfxbe-run" if="html-file-exists" depends="-mark-project-state-running,-clean-if-config-changed,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-selected-browser-path,-set-html-file,-check-jfx-runtime,-check-concurrent-html-runs,-create-temp-run-dir,-warn-insufficient-signing"
            description="Start JavaFX execution in browser">
        <echo message="Executing ${temp.run.html} using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <arg file="${temp.run.html}"/>
        </exec>
        <antcall target="-warn-concurrent-html-runs"/>
    </target>
    
    <target name="jfxbe-debug" if="html-file-exists+netbeans.home" depends="-mark-project-state-debugging-in-browser,-init-debug-args,
            clean,-debug-start-debugger,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-selected-browser-path,-set-html-file,-check-jfx-runtime,-warn-insufficient-signing,
            -debug-jfxbe-debuggee" description="Debug JavaFX project in browser">
        <!-- after the session clean up the jnlp containing debug settings -->
        <antcall target="clean"/>
    </target>
        
    <target name="-debug-jfxbe-debuggee" depends="-init-debug-args">
        <echo message="Executing ${jfx.deployment.html} in debug mode using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <env key="_JPI_VM_OPTIONS" value="-agentlib:jdwp=transport=${debug-transport},address=${jpda.address}"/>
            <arg file="${jfx.deployment.html}"/>
        </exec>
    </target>

    <target if="html-file-exists+netbeans.home" name="-profile-check-html">
        <antcall target="-profile-check-1"/>
    </target>

    <target name="-do-jfxbe-profile" depends="-mark-project-state-profiling,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-selected-browser-path,-set-html-file,-check-jfx-runtime,-warn-insufficient-signing">
        <echo message="Executing ${jfx.deployment.html} in profile mode using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="run.jvmargs.ide" value=""/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <env key="_JPI_VM_OPTIONS" value="${run.jvmargs.ide}"/>
            <arg file="${jfx.deployment.html}"/>
        </exec>
    </target>

    <target name="jfxbe-profile" if="profiler.configured"
        depends="-profile-check-html"
        description="Profile JavaFX project in browser">
        <startprofiler/>
        <antcall target="-do-jfxbe-profile"/>
    </target>

    <target name="jfxbe-run-noscript" depends="-set-fallback-no-javascript, jfxbe-run"/>

    <target name="jfxbe-debug-noscript" depends="-set-fallback-no-javascript, jfxbe-debug"/>

    <target name="jfxbe-profile-noscript" depends="-set-fallback-no-javascript, jfxbe-profile"/>


</project>
